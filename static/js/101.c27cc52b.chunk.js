(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[101],{1120:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n(29),c=n(0),r=n(436),i=n(441),o=n(410),s=n(438),d=n(95),u=n(533),l=n(534),j=n(56),h=n.n(j),b=n(44),x=n(57),p=new(function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"search",value:function(e){return h.a.post("".concat(b.a,"/drug/"),e,{headers:Object(x.a)()})}},{key:"addFavorite",value:function(e,t,n){return h.a.post("".concat(b.a,"/drug/").concat(e,"/").concat(t),n,{headers:Object(x.a)()})}},{key:"deleteFavorite",value:function(e){return h.a.delete("".concat(b.a,"/drug/").concat(e),{headers:Object(x.a)()})}}]),e}()),f=n(439),m=n(450),g=n(457),O=n(414),v=n(1),k=Object(r.a)((function(e){return{controlLabel:{marginLeft:"0px",marginRight:"0px"},textField:{width:"250px"},submit:{marginTop:e.spacing(1),padding:"4px 30px",fontSize:"1rem"}}})),y=function(e){var t=e.fetchSearchDrugs,n=e.textChangeHandler,a=e.checkBoxChangeHandler,c=k(),r=function(e){13===e.keyCode&&t()};return Object(v.jsxs)("div",{style:{margin:"10px 0"},children:[Object(v.jsx)(f.a,{size:"small",variant:"outlined",autoFocus:!0,onChange:n,className:c.textField,name:"searchTerm",label:"Name",onKeyUp:function(e){return r(e)}}),Object(v.jsx)("div",{children:Object(v.jsx)(m.a,{control:Object(v.jsx)(g.a,{onChange:a,color:"primary",onKeyUp:function(e){return r(e)},name:"favorite",size:"small"}),label:"Favorite"})}),Object(v.jsx)(O.a,{size:"small",type:"submit",variant:"contained",color:"primary",className:c.submit,onClick:t,children:"Search"})]})},S=n(7),C=n(445),z=n(444),T=n(447),F=n(97),N=n(442),w=n(443),B=n(446),D=n(453),H=n(577),U=n(43),A=n.n(U),R=n(99),W=n(16),E=Object(r.a)((function(e){return{tableContainer:{minWidth:450,marginTop:e.spacing(2)},actions:{textAlign:"center",display:"flex",border:"none","& button":{fontSize:"12px"}}}})),J=Object(S.a)((function(e){return{head:{backgroundColor:e.palette.grey,color:e.palette.grey,fontSize:"12px",fontWeight:700},body:{fontSize:14}}}))(C.a),K=Object(S.a)((function(e){return{root:{fontSize:14,"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& th":{fontSize:12},"& td":{fontSize:12,height:"50px"}}}}))(z.a),L=function(e){var t=e.result,n=e.fetchSearchDrugs,r=E(),i=Object(R.b)().enqueueSnackbar,o=Object(W.a)().user,s=Object(c.useState)(t),d=Object(a.a)(s,2),u=d[0],l=d[1],j=Object(c.useState)([]),h=Object(a.a)(j,2),b=h[0],x=h[1];return Object(v.jsxs)("div",{children:[b&&b.map((function(e,t){return Object(v.jsx)(H.a,{severity:"error",children:e.msg},t)})),Object(v.jsx)(T.a,{component:F.a,className:r.tableContainer,children:Object(v.jsxs)(N.a,{size:"small",className:r.table,"aria-label":"a dense table",children:[Object(v.jsx)(w.a,{children:Object(v.jsxs)(z.a,{children:[Object(v.jsx)(J,{padding:"checkbox",children:"Name"}),Object(v.jsx)(J,{padding:"checkbox",children:"Favorites"}),Object(v.jsx)(J,{padding:"checkbox",children:"Updated"}),Object(v.jsx)(J,{padding:"checkbox",children:"Updated By"})]})}),Object(v.jsx)(B.a,{children:t.map((function(e){return Object(v.jsxs)(K,{children:[Object(v.jsx)(C.a,{padding:"checkbox",component:"th",scope:"row",children:e.name}),Object(v.jsx)(C.a,{padding:"checkbox",children:Object(v.jsx)(m.a,{control:Object(v.jsx)(D.a,{size:"small",checked:Boolean(e.favorite),name:"switchBox",color:"primary",onChange:function(a){!function(e,n){var a={drug_id:n},c=e.target.checked;l(t.map((function(e){return n===e.id&&(e.favorite=c),u}))),!0===c?p.addFavorite(n,o.id,a).then((function(e){setTimeout((function(){i("".concat(e.data.message),{variant:"success"})}),300)}),(function(e){setTimeout((function(){x(e.response.error)}),300)})):p.deleteFavorite(n).then((function(e){setTimeout((function(){i("".concat(e.data.message),{variant:"success"})}),300)}),(function(e){setTimeout((function(){x(e.response.error)}),300)}))}(a,e.id),setTimeout((function(){n()}),200)}})})}),Object(v.jsx)(C.a,{padding:"checkbox",children:e.updated?A()(e.updated).format("lll"):""}),Object(v.jsx)(C.a,{padding:"checkbox",children:e.updated_name})]},e.id)}))})]})})]})},M=Object(r.a)((function(e){return{root:{flexGrow:1,padding:"25px 0px"},title:{paddingBottom:e.spacing(.5)},action:{textTransform:"none",marginTop:e.spacing(2)},card:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"}}}));function P(){var e=M(),t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],u=n[1],l=Object(c.useState)(!1),j=Object(a.a)(l,2),h=j[0],b=j[1],x=Object(c.useState)([]),f=Object(a.a)(x,2),m=f[0],g=f[1],O={searchTerm:r,checkBox:h},k=function(){p.search(O).then((function(e){g(e.data.data)}))};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(o.a,{maxWidth:!1,className:e.root,children:Object(v.jsx)(s.a,{container:!0,justify:"center",spacing:2,children:Object(v.jsxs)(s.a,{item:!0,md:12,xs:12,children:[Object(v.jsx)(d.a,{component:"h1",variant:"h2",color:"textPrimary",className:e.title,children:"Drugs"}),Object(v.jsx)(d.a,{component:"p",variant:"body2",color:"textPrimary",children:"This page is used to manage drugs information."}),Object(v.jsx)(y,{fetchSearchDrugs:k,textChangeHandler:function(e){u(e.target.value)},checkBoxChangeHandler:function(e){b(e.target.checked)}}),m.length>0&&Object(v.jsx)(L,{result:m,fetchSearchDrugs:k})]})})})})})}}}]);
//# sourceMappingURL=101.c27cc52b.chunk.js.map