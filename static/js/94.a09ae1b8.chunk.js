(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[94],{1126:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return $}));var n=a(29),r=a(13),i=a(0),l=a(436),s=a(441),c=a(410),o=a(450),d=a(453),j=a(414),u=a(438),b=a(95),m=a(195),h=a.n(m),p=a(16),O=a(785),f=a(4),x=a(25),v=a(455),g=a(451),y=a(456),C=a(469),S=a(439),N=a(452),k=a(9),w=a(577),L=a(43),P=a.n(L),T=a(99),z=a(1),U=Object(l.a)((function(e){return{title:{backgroundColor:e.palette.primary.light,"& h2":{color:"#fff"}},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),fontSize:"18px"},formControl:{margin:"10px 0",display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary,"& .MuiSelect-select":{minWidth:120}},formLabel:{margin:"5px 10px"},root:{"& .MuiTypography-root":{marginLeft:"5px"}},formHelperText:{width:"220px",fontSize:"12px",paddingLeft:"10px"},statusText:{width:"220px",fontSize:"14px"},modalAction:{borderTop:"1px solid ".concat(e.palette.background.default),display:"flex",justifyContent:"space-between",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),A={one:"",two:"",three:"",four:"",five:""},I=function(e){var t=e.isOpen,a=e.handleOnClose,l=e.isNewUser,s=e.forwardEmailList,c=e.fetchAllUsers,b=e.allUsers,m=e.authUser,h=Object(x.a)(e,["isOpen","handleOnClose","isNewUser","forwardEmailList","fetchAllUsers","allUsers","authUser"]),p=U(),L=Object(T.b)().enqueueSnackbar,I=Object(i.useState)([]),W=Object(n.a)(I,2),E=W[0],_=W[1],F=Object(i.useState)([]),B=Object(n.a)(F,2),M=B[0],H=B[1],K=Object(i.useState)(A),D=Object(n.a)(K,2),q=D[0],R=D[1],Q=b.some((function(e){return!!l&&(String(e.firstname).trim().toLowerCase()===String(E.firstname).trim().toLowerCase()&&String(e.lastname).trim().toLowerCase()===String(E.lastname).trim().toLowerCase())})),Y=String(E.firstname).length<=0||String(E.firstname).length>25,J=String(E.lastname).length<=0||String(E.lastname).length>255,Z=b.some((function(e){return!!l&&String(e.email).trim().toLowerCase()===String(E.email).trim().toLowerCase()})),G=E.id===m.id&&"D"===String(E.status);Object(i.useEffect)((function(){var e=Object(f.a)({},h.user);_(e)}),[h.user]);var $={firstname:E.firstname,lastname:E.lastname,title:E.title,email:E.email,phone:E.phone,timezone:E.timezone,note:E.note,status:E.status,appointments:E.appointments,type:E.type,schedule:E.schedule,admin:E.admin,email_forward_user_id:E.email_forward_user_id},V=function(){(E.firstname?E.lastname?E.email?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(E.email).toLowerCase())?E.type||(R(Object(f.a)(Object(f.a)({},q),{},{four:"Please select a type!"})),0):(R(Object(f.a)(Object(f.a)({},q),{},{five:"Invalid email"})),0):(R(Object(f.a)(Object(f.a)({},q),{},{three:"Email can't be blank!"})),0):(R(Object(f.a)(Object(f.a)({},q),{},{two:"Lastname can't be blank!"})),0):(R(Object(f.a)(Object(f.a)({},q),{},{one:"Firstname can't be blank !"})),0))&&(l?O.a.createNewUser($).then((function(e){setTimeout((function(){L("".concat(e.data.message),{variant:"success"})}),300)}),(function(e){setTimeout((function(){H(e.response.error)}),300)})):O.a.updateUser(E.id,$).then((function(e){setTimeout((function(){L("".concat(e.data.message),{variant:"success"})}),300)}),(function(e){setTimeout((function(){H(e.response.error)}),300)})),a(),setTimeout((function(){c()}),200))},X=function(e){var t="checkbox"===e.target.type;_(Object(f.a)(Object(f.a)({},E),{},Object(r.a)({},e.target.name,t?e.target.checked:e.target.value.trim()))),R(A)},ee=function(e){13===e.keyCode&&V()};return Object(z.jsx)("div",{children:Object(z.jsxs)(v.a,{maxWidth:"sm",fullWidth:!0,open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(z.jsx)(g.a,{id:"alert-dialog-title",className:p.title,children:l?"New User":"Edit User"}),Object(z.jsxs)(y.a,{className:p.content,children:[M&&M.map((function(e,t){return Object(z.jsx)(w.a,{severity:"error",children:e.msg},t)})),Object(z.jsxs)("div",{className:p.root,children:[Object(z.jsxs)(u.a,{container:!0,justify:"center",spacing:1,children:[Object(z.jsxs)(u.a,{item:!0,xs:12,md:4,className:p.gridMargin,children:[Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,autoFocus:!0,required:!0,label:"Firstname",name:"firstname",value:E.firstname?String(E.firstname):"",onChange:X,onKeyUp:ee,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},error:q.one||Q||Y,helperText:q.one&&q.one||Q&&"This firstname and lastname already exists!"||Y&&"Firstname can't be less then 0 or greater then 255 characters!"})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{required:!0,fullWidth:!0,label:"Lastname",name:"lastname",value:E.lastname?String(E.lastname):"",onChange:X,onKeyUp:ee,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},error:q.two||Q||J,helperText:q.two&&q.two||Q&&"This firstname and lastname already exists!"||J&&"Lastname can't be less then 0 or greater then 255 characters!"})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,label:"Title",name:"title",value:E.title?String(E.title):"",onChange:X,onKeyUp:ee,variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,required:!0,label:"Email",name:"email",value:E.email?String(E.email):"",onChange:X,onKeyUp:ee,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},error:q.three||Z||q.five,helperText:q.three&&q.three||Z&&"This email already exists!"||q.five&&q.five})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,label:"Phone",name:"phone",value:E.phone?String(E.phone):"",onChange:X,onKeyUp:ee,variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsxs)(S.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Timezone",name:"timezone",value:E.timezone,onChange:X,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},SelectProps:{native:!0},children:[Object(z.jsx)("option",{"aria-label":"None",value:""}),Object(z.jsx)("option",{"aria-label":"None",value:"-10",children:"HST - Hawaii Standard Time"}),Object(z.jsx)("option",{"aria-label":"None",value:"-9",children:"AKST - Alaska Standard Time"}),Object(z.jsx)("option",{"aria-label":"None",value:"-8",children:"PST - Pacific Standard Time"}),Object(z.jsx)("option",{"aria-label":"None",value:"-7",children:"MST - Mountain Standard Time"}),Object(z.jsx)("option",{"aria-label":"None",value:"-6",children:"CST - Central Standard Time"}),Object(z.jsx)("option",{"aria-label":"None",value:"-5",children:"EST - Eastern Standard Time"})]})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,disabled:!0,label:"Created",value:E.created?P()(E.created).format("lll"):"",variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,disabled:!0,label:"Created By",value:E.created_user,variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})})]}),Object(z.jsxs)(u.a,{item:!0,xs:12,md:4,className:p.gridMargin,children:[Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsxs)(S.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Status",name:"status",value:E.status,onChange:X,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},SelectProps:{native:!0},error:G,helperText:G&&"You can't set yourself to deleted!",children:[Object(z.jsx)("option",{"aria-label":"None",value:"A",children:"Active"}),Object(z.jsx)("option",{"aria-label":"None",value:"I",children:"Inactive"}),Object(z.jsx)("option",{"aria-label":"None",value:"D",children:"Deleted"})]})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsxs)(S.a,{fullWidth:!0,required:!0,id:"outlined-select-currency",select:!0,label:"Type",name:"type",value:E.type,onChange:X,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},SelectProps:{native:!0},error:q.four,helperText:q.four&&q.four,children:[Object(z.jsx)("option",{"aria-label":"None",value:""}),Object(z.jsx)("option",{"aria-label":"None",value:"PP",children:"Primary Provider"}),Object(z.jsx)("option",{"aria-label":"None",value:"SP",children:"Secondary Provider"}),Object(z.jsx)("option",{"aria-label":"None",value:"A",children:"Administrative"}),Object(z.jsx)("option",{"aria-label":"None",value:"L",children:"Limited"})]})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsxs)(S.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Schedule",name:"schedule",value:E.schedule,onChange:X,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},SelectProps:{native:!0},children:[Object(z.jsx)("option",{"aria-label":"None",value:"F",children:"Full"}),Object(z.jsx)("option",{"aria-label":"None",value:"H",children:"Half"}),Object(z.jsx)("option",{"aria-label":"None",value:"Q",children:"Quarter"})]})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsxs)(S.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Forward Email",name:"email_forward_user_id",value:E.email_forward_user_id,onChange:X,variant:"outlined",size:"small",InputLabelProps:{shrink:!0},SelectProps:{native:!0},children:[Object(z.jsx)("option",{"aria-label":"None",value:""}),s.map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,disabled:!0,label:"Last Login",value:E.login_dt?P()(E.login_dt).format("lll"):"",variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,disabled:!0,label:"Updated",value:E.updated?P()(E.updated).format("lll"):"",variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{fullWidth:!0,disabled:!0,label:"Updated By",value:E.updated_user,variant:"outlined",size:"small",InputLabelProps:{shrink:!0}})})]}),Object(z.jsxs)(u.a,{item:!0,xs:12,md:4,children:[Object(z.jsx)(o.a,{className:p.formLabel,control:Object(z.jsx)(d.a,{checked:Boolean(E.appointments),size:"small",name:"appointments",color:"primary",onChange:X}),label:"Appointments"}),Object(z.jsx)(o.a,{className:p.formLabel,control:Object(z.jsx)(d.a,{checked:Boolean(E.admin),size:"small",name:"admin",color:"primary",onChange:X}),label:"Administrator"})]})]}),Object(z.jsx)(C.a,{component:"div",className:p.formControl,children:Object(z.jsx)(S.a,{className:p.noteMargin,fullWidth:!0,variant:"outlined",multiline:!0,name:"note",label:"Notes",InputLabelProps:{shrink:!0},InputProps:{rows:6},value:E.note?String(E.note):"",onChange:X,onKeyUp:ee})})]})]}),Object(z.jsxs)(N.a,{className:p.modalAction,children:[Object(z.jsx)(j.a,{size:"small",variant:"outlined",onClick:a,style:{borderColor:k.a.orange[600],color:k.a.orange[600]},children:"Cancel"}),Object(z.jsx)(j.a,{variant:"outlined",color:"primary",size:"small",onClick:V,disabled:!!(Q||Y||J||Z||G),children:l?"Save":"Update"})]})]})})},W=a(7),E=a(445),_=a(444),F=a(447),B=a(97),M=a(442),H=a(443),K=a(446),D=a(413),q=a(554),R=a.n(q),Q=Object(l.a)((function(e){return{tableContainer:{minWidth:450,marginTop:e.spacing(2)}}})),Y=Object(W.a)((function(e){return{head:{backgroundColor:e.palette.grey,color:e.palette.grey,fontSize:"12px",fontWeight:700},body:{fontSize:14}}}))(E.a),J=Object(W.a)((function(e){return{root:{fontSize:14,"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& th":{fontSize:12},"& td":{padding:"6px 16px",fontSize:12,height:"50px"}}}}))(_.a),Z=function(e){var t=e.users,a=e.handleOnEditClick,n=Q();return Object(z.jsx)("div",{children:Object(z.jsx)(F.a,{component:B.a,className:n.tableContainer,children:Object(z.jsxs)(M.a,{className:n.table,"aria-label":"a dense table",children:[Object(z.jsx)(H.a,{children:Object(z.jsxs)(_.a,{children:[Object(z.jsx)(Y,{children:"Firstname"}),Object(z.jsx)(Y,{children:"Lastname"}),Object(z.jsx)(Y,{children:"Title"}),Object(z.jsx)(Y,{children:"Email"}),Object(z.jsx)(Y,{children:"Status"}),Object(z.jsx)(Y,{children:"Type"}),Object(z.jsx)(Y,{children:"Schedule"}),Object(z.jsx)(Y,{children:"Appt"}),Object(z.jsx)(Y,{children:"Admin"}),Object(z.jsx)(Y,{children:"Note"}),Object(z.jsx)(Y,{children:"Forward"}),Object(z.jsx)(Y,{children:"Created"}),Object(z.jsx)(Y,{children:"Created By"}),Object(z.jsx)(Y,{children:"Updated"}),Object(z.jsx)(Y,{children:"Updated By"}),Object(z.jsx)(Y,{children:"Edit"})]})}),Object(z.jsx)(K.a,{children:t.map((function(e){return Object(z.jsxs)(J,{children:[Object(z.jsx)(E.a,{component:"th",scope:"row",children:e.firstname}),Object(z.jsx)(E.a,{children:e.lastname}),Object(z.jsx)(E.a,{children:e.title}),Object(z.jsx)(E.a,{children:e.email}),Object(z.jsx)(E.a,{children:"A"===e.status?"Active":"I"===e.status?"Inactive":"Deleted"}),Object(z.jsx)(E.a,{children:"PP"===e.type?"Primary Provider":"SP"===e.type?"Secondary Provider":"A"===e.type?"Administrative":"L"===e.type?"Limited":""}),Object(z.jsx)(E.a,{children:"F"===e.schedule?"Full":"H"===e.schedule?"Half":"Quarter"}),Object(z.jsx)(E.a,{children:e.appointments?"Yes":"No"}),Object(z.jsx)(E.a,{children:e.admin?"Yes":"No"}),Object(z.jsx)(E.a,{children:e.note}),Object(z.jsx)(E.a,{children:e.forward_user}),Object(z.jsx)(E.a,{children:e.created?P()(e.created).format("lll"):""}),Object(z.jsx)(E.a,{children:e.created_user}),Object(z.jsx)(E.a,{children:e.updated?P()(e.updated).format("lll"):""}),Object(z.jsx)(E.a,{children:e.updated_user}),Object(z.jsx)(E.a,{children:Object(z.jsx)(D.a,{"aria-label":"edit",onClick:function(){return a(e.id)},children:Object(z.jsx)(R.a,{fontSize:"small"})})})]},e.id)}))})]})})})},G=Object(l.a)((function(e){return{root:{flexGrow:1,padding:"40px 0px"},uploadButtons:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"550px",marginBottom:e.spacing(1),"& h1":Object(r.a)({},e.breakpoints.up("md"),{marginRight:e.spacing(4)})}}})),$=function(){var e=G(),t=Object(p.a)().user,a=Object(i.useState)(!1),r=Object(n.a)(a,2),l=r[0],m=r[1],f=Object(i.useState)(!0),x=Object(n.a)(f,2),v=x[0],g=x[1],y=Object(i.useState)([]),C=Object(n.a)(y,2),S=C[0],N=C[1],k=Object(i.useState)([]),w=Object(n.a)(k,2),L=w[0],P=w[1],T=Object(i.useState)(""),U=Object(n.a)(T,2),A=U[0],W=U[1],E=Object(i.useState)(!1),_=Object(n.a)(E,2),F=_[0],B=_[1],M=Object(i.useCallback)((function(){O.a.getAllUsers().then((function(e){var t=e.data.data;if(N(t),!1===F){var a=t.filter((function(e){return"D"!==e.status}));N(a)}else N(t)}))}),[F]);Object(i.useEffect)((function(){M()}),[F,M]);Object(i.useEffect)((function(){O.a.getForwardEmailList().then((function(e){return P(e.data.data)}))}),[]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(s.a,{}),Object(z.jsxs)(c.a,{maxWidth:!1,className:e.root,children:[Object(z.jsxs)("div",{className:e.uploadButtons,children:[Object(z.jsx)(b.a,{component:"h1",variant:"h2",color:"textPrimary",children:"Users"}),Object(z.jsx)(o.a,{control:Object(z.jsx)(d.a,{checked:F,size:"small",name:"active",color:"primary",onChange:function(){return B(!F)}}),label:"Show deleted users",labelPlacement:"start"}),Object(z.jsx)(j.a,{variant:"contained",color:"primary",component:"span",onClick:function(){return m(!0),g(!0),void W({admin:!1,status:"A",schedule:"F",type:"",appointments:!0})},children:"New"})]}),Object(z.jsx)(u.a,{container:!0,justify:"center",spacing:8,children:Object(z.jsxs)(u.a,{item:!0,md:12,xs:12,children:[Object(z.jsx)(b.a,{component:"p",variant:"body2",color:"textPrimary",children:"This page is used to manage users"}),Object(z.jsx)(Z,{users:S,handleOnEditClick:function(e){m(!0),g(!1);var t=S.filter((function(t){return t.id===e}));return t&&W(h.a.head(t))}})]})}),Object(z.jsx)(I,{isOpen:l,handleOnClose:function(){return m(!1)},isNewUser:v,forwardEmailList:L,fetchAllUsers:M,authUser:t,user:A,allUsers:S})]})]})}},785:function(e,t,a){"use strict";var n=a(533),r=a(534),i=a(56),l=a.n(i),s=a(57),c="".concat("http://localhost:5000/","api/v1")||!1,o=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAllUsers",value:function(){return l.a.get("".concat(c,"/allusers"),{headers:Object(s.a)()})}},{key:"getForwardEmailList",value:function(){return l.a.get("".concat(c,"/forwardemail"),{headers:Object(s.a)()})}},{key:"createNewUser",value:function(e){return l.a.post("".concat(c,"/user"),e,{headers:Object(s.a)()})}},{key:"updateUser",value:function(e,t){return l.a.put("".concat(c,"/user/").concat(e),t,{headers:Object(s.a)()})}},{key:"getContractlists",value:function(){return l.a.get("".concat(c,"/auth/user/contracts"),{headers:Object(s.a)()})}}]),e}();t.a=new o}}]);
//# sourceMappingURL=94.a09ae1b8.chunk.js.map