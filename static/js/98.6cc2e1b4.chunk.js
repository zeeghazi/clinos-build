(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[98],{1115:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ae}));var n=a(29),c=a(0),i=a(436),s=a(7),o=a(414),l=a(469),r=a(450),d=a(413),j=a(97),b=a(463),p=a(462),u=a(442),m=a(446),x=a(445),h=a(447),g=a(443),O=a(444),f=a(333),v=a(439),y=a(459),S=a(95),C=a(541),k=a.n(C),N=a(554),w=a.n(N),z=a(43),E=a.n(z),W=a(99),A=a(533),R=a(534),T=a(56),H=a.n(T),D=a(44),F=a(57),I=new(function(){function e(){Object(A.a)(this,e)}return Object(R.a)(e,[{key:"getEmailHistory",value:function(){return H.a.get("".concat(D.a,"/email/history"),{headers:Object(F.a)()})}},{key:"updateEmailHistory",value:function(e){return H.a.put("".concat(D.a,"/email/history"),e,{headers:Object(F.a)()})}},{key:"createEmailHistory",value:function(e){return H.a.post("".concat(D.a,"/email/history"),e,{headers:Object(F.a)()})}},{key:"deleteEmailHistory",value:function(e){return H.a.delete("".concat(D.a,"/email/history/").concat(e),{headers:Object(F.a)()})}}]),e}()),P=a(25),L=a(9),M=a(455),U=a(452),B=a(456),Y=a(458),q=a(451),J=a(1),G=Object(i.a)((function(e){return{title:{backgroundColor:e.palette.primary.light,"& h2":{color:"#fff",fontSize:"16px"}},content:{paddingLeft:e.spacing(3),paddingTop:e.spacing(3),paddingRight:e.spacing(3),paddingBottom:e.spacing(6),fontSize:"18px","& p":{fontSize:"16px"}},emailDataWrap:{paddingTop:e.spacing(2)},record:{display:"flex",marginBottom:e.spacing(1),fontSize:"16px",lineHeight:"24px","& p:first-child":{fontWeight:"600",fontSize:"18px",minWidth:"87px",marginRight:e.spacing(1)}},modalAction:{borderTop:"1px solid ".concat(e.palette.background.default),display:"flex",justifyContent:"space-between",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),_=function(e){var t=e.isOpen,a=e.onClose,i=e.onSave,s=Object(P.a)(e,["isOpen","onClose","onSave"]),l=G(),r=Object(c.useState)([]),d=Object(n.a)(r,2),j=d[0],b=d[1];Object(c.useEffect)((function(){b(s.emailData)}),[s.emailData]);return Object(J.jsx)("div",{children:Object(J.jsxs)(M.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(J.jsx)(q.a,{id:"alert-dialog-title",className:l.title,children:"Email Confirmation"}),Object(J.jsxs)(B.a,{className:l.content,children:[Object(J.jsx)(Y.a,{id:"alert-dialog-description",children:"It will send email to all patient."}),Object(J.jsx)("div",{className:l.emailDataWrap,children:j&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:l.record,children:[Object(J.jsx)("p",{children:"Status:"}),Object(J.jsx)("p",{children:"U"===j.emailStatus?"Active":"InActive"})]}),Object(J.jsxs)("div",{className:l.record,children:[Object(J.jsx)("p",{children:"Subject:"}),Object(J.jsx)("p",{children:null===j||void 0===j?void 0:j.subject})]}),Object(J.jsxs)("div",{className:l.record,children:[Object(J.jsx)("p",{children:"message:"}),Object(J.jsx)("p",{children:j.message})]})]})})]}),Object(J.jsxs)(U.a,{className:l.modalAction,children:[Object(J.jsx)(o.a,{size:"small",variant:"outlined",onClick:function(){return a()},style:{borderColor:L.a.orange[600],color:L.a.orange[600]},children:"Cancel"}),Object(J.jsx)(o.a,{variant:"contained",color:"primary",size:"small",onClick:function(){i({data:j})},children:"Send"})]})]})})},K=a(13),Q=a(4),V=Object(i.a)((function(e){return{title:{backgroundColor:e.palette.primary.light,"& h2":{color:"#fff"}},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),fontSize:"18px"},statusWrapper:{display:"block"},status:{display:"inline"},formControl:{display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary,"& .MuiSelect-select":{minWidth:120}},formLabel:{fontSize:"14px",fontWeight:"600",width:"220px"},formHelperText:{fontSize:"12px",paddingLeft:"16px"},formField:{flex:1},modalAction:{borderTop:"1px solid ".concat(e.palette.background.default),display:"flex",justifyContent:"space-between",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},formFieldLarge:{maxWidth:"270px",flex:1,width:"300px"},formFieldSmall:{maxWidth:"100px",flex:1},textArea:{marginTop:"12px"}}})),X=function(e){var t=e.isOpen,a=e.onClose,i=e.onUpdate,s=Object(P.a)(e,["isOpen","onClose","onUpdate"]),d=V(),j=Object(W.b)().enqueueSnackbar,u=Object(c.useState)([]),m=Object(n.a)(u,2),x=m[0],h=m[1];Object(c.useEffect)((function(){h(s.selectedEmail)}),[s.selectedEmail]);var g=function(e){h(Object(Q.a)(Object(Q.a)({},x),{},Object(K.a)({},e.target.name,e.target.value)))};return Object(J.jsx)("div",{children:Object(J.jsxs)(M.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(J.jsx)(q.a,{id:"alert-dialog-title",className:d.title,children:"Edit Email"}),Object(J.jsxs)(B.a,{className:d.content,children:[Object(J.jsx)(Y.a,{id:"alert-dialog-description",children:"Edit the following for this email"}),Object(J.jsxs)("div",{className:d.root,children:[Object(J.jsx)(l.a,{component:"div",className:d.formControl,children:Object(J.jsx)(v.a,{autoFocus:!0,className:d.formFieldLarge,variant:"outlined",label:"Subject",margin:"normal",fullWidth:!0,name:"subject",id:"subject",autoComplete:"subject",onChange:function(e){return g(e)},value:x.subject,size:"small"})}),Object(J.jsxs)("div",{className:d.statusWrapper,children:[Object(J.jsx)(S.a,{component:"p",variant:"body2",color:"textPrimary",children:"Patient Status:"}),Object(J.jsx)(l.a,{component:"fieldset",children:Object(J.jsxs)(p.a,{"aria-label":"status",name:"status",value:x.status,onChange:g,className:d.status,children:[Object(J.jsx)(r.a,{value:"U",control:Object(J.jsx)(b.a,{}),label:"Active"}),Object(J.jsx)(r.a,{value:"R",control:Object(J.jsx)(b.a,{}),label:"Inactive"})]})})]}),Object(J.jsx)(l.a,{component:"div",className:"".concat(d.formControl," ").concat(d.textArea),children:Object(J.jsx)(v.a,{fullWidth:!0,variant:"outlined",label:"Message",multiline:!0,name:"message",InputProps:{classes:d.normalOutline,inputComponent:f.a,rows:8},value:x.message,onChange:function(e){return g(e)}})})]})]}),Object(J.jsxs)(U.a,{className:d.modalAction,children:[Object(J.jsx)(o.a,{size:"small",variant:"outlined",onClick:function(){return a()},style:{borderColor:L.a.orange[600],color:L.a.orange[600]},children:"Cancel"}),Object(J.jsx)(o.a,{variant:"contained",color:"primary",size:"small",onClick:function(){I.updateEmailHistory({data:{emailData:x}}).then((function(e){j("".concat(e.data.message),{variant:"success"}),i(),a()}))},children:"Update"})]})]})})},Z=Object(i.a)((function(e){return{root:{flexGrow:1,padding:"25px 0px"},title:{paddingBottom:e.spacing(.5)},statusWrapper:{display:"flex",alignItems:"center","& p":{marginRight:e.spacing(2)}},emailStatus:{display:"inline"},status:{display:"flex",alignItems:"center"},subject:{width:"50%"},fields:{display:"flex",flexDirection:"column"},texArea:{width:"75%"},next:{margin:e.spacing(3,0,2),maxWidth:"100px"},historyTop:{marginTop:"15px"},tableContainer:{borderRadius:0,marginTop:"5px",display:"flex",border:"black solid 1px",padding:"5px",height:"300px",flexDirection:"row"},noRecords:{marginTop:e.spacing(1),marginLeft:e.spacing(1)},marginRight:{marginRight:e.spacing(1)}}})),$=Object(s.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:13}}}))(y.a),ee=Object(s.a)((function(e){return{head:{backgroundColor:e.palette.grey,color:e.palette.grey,fontSize:"12px",fontWeight:700},body:{fontSize:14}}}))(x.a),te=Object(s.a)((function(e){return{root:{fontSize:14,"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& th":{fontSize:12},"& td":{fontSize:12}}}}))(O.a);function ae(){var e=Z(),t=Object(W.b)().enqueueSnackbar,a=Object(c.useState)(""),i=Object(n.a)(a,2),s=i[0],y=i[1],C=Object(c.useState)([]),N=Object(n.a)(C,2),z=N[0],A=N[1],R=Object(c.useState)(""),T=Object(n.a)(R,2),H=T[0],D=T[1],F=Object(c.useState)(!1),P=Object(n.a)(F,2),L=P[0],M=P[1],U=Object(c.useState)(!1),B=Object(n.a)(U,2),Y=B[0],q=B[1],G=Object(c.useState)({}),K=Object(n.a)(G,2),Q=K[0],V=K[1],ae=Object(c.useCallback)((function(){I.getEmailHistory().then((function(e){A(e.data.data)}))}),[]);Object(c.useEffect)((function(){ae()}),[ae]);return Object(J.jsxs)("div",{className:e.root,children:[Object(J.jsx)(S.a,{component:"h1",variant:"h2",color:"textPrimary",className:e.title,children:"Email Patients"}),Object(J.jsx)(S.a,{component:"p",variant:"body2",color:"textPrimary",children:"This pages send a message to all patients"}),Object(J.jsxs)("div",{className:e.statusWrapper,children:[Object(J.jsx)(S.a,{component:"p",variant:"body2",color:"textPrimary",children:"Patient Status:"}),Object(J.jsx)(l.a,{component:"fieldset",children:Object(J.jsxs)(p.a,{"aria-label":"status",name:"status",value:H,onChange:function(e){return D(e.target.value)},className:e.emailStatus,children:[Object(J.jsx)(r.a,{value:"U",control:Object(J.jsx)(b.a,{}),label:"Active"}),Object(J.jsx)(r.a,{value:"R",control:Object(J.jsx)(b.a,{}),label:"Inactive"})]})})]}),Object(J.jsxs)("div",{className:e.fields,children:[Object(J.jsx)(v.a,{autoFocus:!0,fullWidth:!0,variant:"outlined",label:"Message",className:e.texArea,InputProps:{classes:e.normalOutline,inputComponent:f.a,rows:8},value:s,onChange:function(e){return y(e.target.value)},size:"small"}),Object(J.jsx)(o.a,{disabled:!s,variant:"contained",color:"primary",className:e.next,onClick:function(){M(!0)},children:"Next"})]}),Object(J.jsxs)("div",{className:e.historyTop,children:[Object(J.jsx)(S.a,{component:"p",variant:"body2",color:"textPrimary",children:"History"}),Object(J.jsx)(h.a,{component:j.a,className:e.tableContainer,children:Object(J.jsxs)(u.a,{size:"small",className:e.table,children:[Object(J.jsx)(g.a,{children:Object(J.jsxs)(O.a,{children:[Object(J.jsx)(ee,{padding:"checkbox",children:"Date"}),Object(J.jsx)(ee,{padding:"checkbox",children:"Subject"}),Object(J.jsx)(ee,{padding:"checkbox",children:"Message"}),Object(J.jsx)(ee,{padding:"checkbox",children:"Status"}),Object(J.jsx)(ee,{padding:"checkbox",children:"Sent By"}),Object(J.jsx)(ee,{padding:"checkbox",children:"Actions"})]})}),Object(J.jsx)(m.a,{children:z.length?z.map((function(a){return Object(J.jsxs)(te,{children:[Object(J.jsx)(x.a,{style:{whiteSpace:"nowrap"},padding:"checkbox",component:"th",scope:"row",children:E()(a.created).format("lll")}),Object(J.jsx)(x.a,{padding:"checkbox",component:"th",scope:"row",children:a.subject}),a.message&&a.message.length>25?Object(J.jsx)($,{title:a.message,children:Object(J.jsx)(x.a,{padding:"checkbox",className:e.overFlowControl,children:"".concat(a.message.substring(0,25),"...")})}):Object(J.jsx)(x.a,{padding:"checkbox",className:e.overFlowControl,children:a.message||""}),Object(J.jsx)(x.a,{padding:"checkbox",component:"th",scope:"row",children:a.status?"U"===a.status?"Active":"InActive":""}),Object(J.jsx)(x.a,{padding:"checkbox",children:a.created_user}),Object(J.jsx)(x.a,{padding:"checkbox",className:e.actions,children:(n=a.created,E()().subtract(30,"minutes").format()<E()(n).format()?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(d.a,{"aria-label":"edit",className:e.marginRight,onClick:function(){return e=a,q(!0),void V(e);var e},children:Object(J.jsx)(w.a,{fontSize:"small"})}),Object(J.jsx)(d.a,{"aria-label":"delete",onClick:function(){return e=a.created,void I.deleteEmailHistory(E()(e).format("YYYY-MM-DD HH:mm:ss")).then((function(e){t("".concat(e.data.message),{variant:"success"}),ae()}));var e},children:Object(J.jsx)(k.a,{fontSize:"small"})})]}):"")})]},a.created);var n})):Object(J.jsx)(te,{children:Object(J.jsx)(x.a,{colSpan:6,children:Object(J.jsx)(S.a,{align:"center",variant:"body1",children:"No Records Found..."})})})})]})})]}),L&&Object(J.jsx)(_,{isOpen:L,onClose:function(){return M(!1)},onSave:function(e){return function(e){I.createEmailHistory(e).then((function(e){t("".concat(e.data.message),{variant:"success"}),ae(),M()}))}(e)},emailData:{emailStatus:H,message:s}}),Y&&Object(J.jsx)(X,{isOpen:Y,onUpdate:function(){return ae()},onClose:function(){return q(!1)},selectedEmail:Q})]})}}}]);
//# sourceMappingURL=98.6cc2e1b4.chunk.js.map