(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[57],{1143:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return G}));var n=a(29),c=a(0),r=a(436),i=a(7),o=a(414),l=a(438),u=a(442),s=a(446),d=a(445),p=a(447),b=a(443),j=a(444),h=a(95),f=a(43),m=a.n(f),O=a(99),g=a(16),v=a(777),y=a(64),x=a(13),_=a(4),k=a(9),C=a(439),N=a(422),P=a(455),B=a(456),S=a(451),D=a(413),w=a(570),M=a.n(w),W=a(3),z=a(578),q=a(573),E=a(651),T=a(574),A=a(558),L=a(555),F=a(1),H=Object(r.a)((function(t){return{title:{backgroundColor:t.palette.primary.light,"& h2":{color:"#fff"}},closeButton:{position:"absolute",right:t.spacing(.5),top:t.spacing(.5),color:"#ffffff"},formContainer:{margin:t.spacing(3,0)},gutterBottom:{marginBottom:t.spacing(1)},customLabel:{fontSize:16,color:"#37474f",marginBottom:t.spacing(2)},circularProgress:{position:"absolute",textAlign:"center",left:"50%"},modalConentBelow:{opacity:"1"},contentWithLoading:{opacity:"0.5"},buttonsContainer:{margin:t.spacing(3,0)},cancelButton:{borderColor:k.a.orange[600],color:k.a.orange[600]}}})),R=function(t){var e,a=H(),r=Object(g.a)().user,i=Object(O.b)().enqueueSnackbar,u=t.isOpen,s=t.onClose,d=t.reloadData,p=t.cardData,b=Boolean(p),j=Object(c.useState)({cardType:"",cardNumber:"",cvv:"",expiryDate:"",address:"",address2:"",city:"",postal:""}),f=Object(n.a)(j,2),m=f[0],k=f[1],w=Object(c.useState)(""),R=Object(n.a)(w,2),I=R[0],V=R[1],Y=Object(c.useState)(""),J=Object(n.a)(Y,2),G=J[0],Z=J[1],K=Object(c.useState)(!1),Q=Object(n.a)(K,2),U=Q[0],X=Q[1];Object(c.useEffect)((function(){var t=z.a.filter((function(t){return t[1]===m.country}));if(t.length){V(t[0]);var e=t[0][2].split("|").map((function(t){var e=t.split("~"),a=Object(n.a)(e,2),c=a[0];return[void 0===c?null:c,a[1]]})).filter((function(t){return t[1]===m.state}));Z(e[0][1])}}),[m]);var $=Object(c.useCallback)((function(){L.a.getProfile().then((function(t){var e,a=null===(e=t.data)||void 0===e?void 0:e[0];k((function(t){return Object(_.a)(Object(_.a)({},t),a)}))}))}),[]);Object(c.useEffect)((function(){$()}),[$]);Object(c.useEffect)((function(){p&&(m.cardType=Object(y.D)(p.type),m.cardNumber=b?"____/____/____/".concat(p.account_number):p.account_number,m.expiryDate=p.exp,k(Object(_.a)({},m)))}),[p]);var tt=function(t,e){k(Object(_.a)(Object(_.a)({},m),{},Object(x.a)({},t,e)))},et=function(t){var e=t.target,a=e.value,n=e.name;tt(n,a)},at=function(t,e){"country"===t?V(e):"region"===t&&Z(e)};return Object(A.a)((function(){!function(){var t=m.cardNumber[0];tt("cardType","3"===t?"American Express":"4"===t?"Visa":"5"===t?"Master":"")}()}),[m.cardNumber]),Object(F.jsxs)(P.a,{open:u,onClose:s,fullWidth:!0,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsxs)(S.a,{id:"alert-dialog-title",className:a.title,children:["".concat(b?"Edit":"Add"," Payment Method"),Object(F.jsx)(D.a,{"aria-label":"Close",className:a.closeButton,onClick:s,children:Object(F.jsx)(M.a,{})})]}),Object(F.jsxs)(B.a,{className:a.content,children:[U&&Object(F.jsx)("div",{className:a.circularProgress,children:Object(F.jsx)(N.a,{})}),Object(F.jsx)("div",{className:Object(W.a)((e={},Object(x.a)(e,a.modalConentBelow,!0),Object(x.a)(e,a.contentWithLoading,U),e)),children:Object(F.jsxs)("form",{onSubmit:function(t){t.preventDefault(),X(!0);var e={data:{exp:m.expiryDate.replace("/",""),type:m.cardType[0]||"V",cvc:m.cvv,account_number:m.cardNumber.replaceAll("/",""),stripe_customer_id:r.stripe_customer_id,corp_stripe_customer_id:r.corp_stripe_customer_id,address:m.address,address2:m.address2,city:m.city,postal:m.postal,country:I[1],state:G}};if(b){var a=p.id,n=Object(_.a)(Object(_.a)({},e),{},{data:Object(_.a)(Object(_.a)({},e.data),{},{corp_stripe_payment_method_token:p.corp_stripe_payment_method_token,stripe_payment_method_token:p.stripe_payment_method_token})});v.a.updatePaymentMethod(a,n).then((function(t){i("".concat(t.message),{variant:"success"}),d(),s()}))}else v.a.createPaymentMethod(e).then((function(t){i("".concat(t.message),{variant:"success"}),d(),X(!1),s()}))},children:[Object(F.jsxs)(l.a,{className:a.formContainer,children:[Object(F.jsxs)(l.a,{children:[Object(F.jsx)(E.a,{required:!0,fullWidth:!0,autoFocus:!b,disabled:b,className:a.gutterBottom,type:"text",name:"cardNumber",label:"Card Number",margin:"dense",variant:"outlined",value:m.cardNumber,mask:"9999/9999/9999/9999",onChange:function(t){return et(t)}}),m.cardType&&m.cardType.length?Object(F.jsx)(h.a,{gutterBottom:!0,children:m.cardType}):null]}),Object(F.jsx)(l.a,{children:Object(F.jsx)(C.a,{required:!0,disabled:b,variant:"outlined",margin:"dense",name:"cvv",id:"cvv",type:"text",label:"CVV",className:a.gutterBottom,value:m.cvv,onChange:function(t){return et(t)}})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(E.a,{required:!0,autoFocus:b,className:a.gutterBottom,type:"text",name:"expiryDate",label:"Expiration",margin:"dense",variant:"outlined",value:m.expiryDate,mask:"99/99",onChange:function(t){return et(t)}})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(C.a,{className:a.gutterBottom,label:"Address",name:"address",value:m.address,fullWidth:!0,onChange:function(t){return et(t)},margin:"dense",variant:"outlined"})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(C.a,{className:a.gutterBottom,label:"Address Line 2",name:"address2",value:m.address2,fullWidth:!0,onChange:function(t){return et(t)},margin:"dense",variant:"outlined"})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(C.a,{className:a.gutterBottom,label:"City",name:"city",value:m.city,fullWidth:!0,onChange:function(t){return et(t)},margin:"dense",variant:"outlined"})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(C.a,{className:a.gutterBottom,label:"Zip/Postal",name:"postal",value:m.postal,fullWidth:!0,onChange:function(t){return et(t)},margin:"dense",variant:"outlined"})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(q.a,{id:"country-select",error:null,name:"country-select",helperText:"",label:"Country",handleChange:function(t,e){return at(t,e)},country:I,margin:"dense",variant:"outlined"})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(T.a,{id:"state-select",error:null,name:"state-select",helperText:"",label:"State",handleChange:function(t,e){return at(t,e)},country:I,region:G,margin:"dense",variant:"outlined"})})]}),Object(F.jsxs)(l.a,{container:!0,className:a.buttonsContainer,justify:"space-between",children:[Object(F.jsx)(o.a,{color:"primary",variant:"outlined",type:"submit",children:"".concat(b?"Edit":"Add"," Method")}),Object(F.jsx)(o.a,{size:"small",variant:"outlined",onClick:function(){return s()},className:a.cancelButton,children:"Cancel"})]})]})})]})]})};R.defaultProps={cardData:null};var I=R,V=Object(r.a)((function(t){return{root:{flexGrow:1,padding:"40px 0px"},titleSection:{display:"flex",alignItems:"center"},title:{paddingBottom:t.spacing(.5)},btn:{fontSize:"14px",marginLeft:t.spacing(4),marginBottom:t.spacing(1)},actionButtonStyle:{minWidth:0}}})),Y=Object(i.a)((function(){return{head:{whiteSpace:"nowrap",fontSize:"14px",fontWeight:700,padding:"6px 24px 2px 2px",borderBottom:"unset"},body:{fontSize:14,borderBottom:"unset"}}}))(d.a),J=Object(i.a)((function(){return{root:{fontSize:14,"& th":{fontSize:14,whiteSpace:"nowrap",padding:"0px 16px 2px 2px",lineHeight:"16px"},"& td":{fontSize:14,whiteSpace:"nowrap",padding:"0px 16px 2px 2px",lineHeight:"16px"},"& button":{padding:0,fontSize:14,lineHeight:"16px",fontWeight:"normal","&:hover":{background:"transparent"}}}}}))(j.a),G=function(){var t=V(),e=Object(O.b)().enqueueSnackbar,a=Object(g.a)().lastVisitedPatient,r=Object(c.useState)([]),i=Object(n.a)(r,2),d=i[0],f=i[1],x=Object(c.useState)(!1),_=Object(n.a)(x,2),k=_[0],C=_[1],N=Object(c.useState)(null),P=Object(n.a)(N,2),B=P[0],S=P[1],D=Object(c.useCallback)((function(){v.a.getPaymentMethods(a).then((function(t){f(t.data)}))}),[a]);Object(c.useEffect)((function(){D()}),[D]);return Object(F.jsxs)(F.Fragment,{children:[!!k&&Object(F.jsx)(I,{isOpen:k,onClose:function(){C(!1),B&&S(null)},reloadData:D,cardData:B}),Object(F.jsxs)("div",{className:t.root,children:[Object(F.jsxs)("div",{className:t.titleSection,children:[Object(F.jsx)(h.a,{component:"h1",variant:"h2",color:"textPrimary",className:t.title,children:"Payment Methods"}),Object(F.jsx)(o.a,{variant:"outlined",color:"primary",className:t.btn,onClick:function(){return C(!0)},children:"New"})]}),Object(F.jsx)(h.a,{component:"h5",variant:"body1",color:"textPrimary",className:t.title,children:"This page is used to manage credit cards or bank accounts used to pay invoices."}),Object(F.jsx)(l.a,{item:!0,md:6,sm:8,xs:12,children:Boolean(d.length)&&Object(F.jsx)(p.a,{className:t.tableContainer,children:Object(F.jsxs)(u.a,{size:"small",className:t.table,children:[Object(F.jsx)(b.a,{children:Object(F.jsxs)(j.a,{children:[Object(F.jsx)(Y,{children:"Date"}),Object(F.jsx)(Y,{children:"Type"}),Object(F.jsx)(Y,{children:"Card Number"}),Object(F.jsx)(Y,{children:"Edit"}),Object(F.jsx)(Y,{children:"Delete"})]})}),Object(F.jsx)(s.a,{children:d.map((function(a){return Object(F.jsxs)(J,{children:[Object(F.jsx)(Y,{children:m()(a.created).format("MMM D YYYY")}),Object(F.jsx)(Y,{children:Object(y.D)(a.type)}),Object(F.jsxs)(Y,{children:["Ending in"," ",a.account_number]}),Object(F.jsx)(Y,{children:Object(F.jsx)(o.a,{disableRipple:!0,variant:"text",onClick:function(){return function(t){S(t),C(!0)}(a)},className:t.actionButtonStyle,children:"Edit"})}),Object(F.jsx)(Y,{children:Object(F.jsx)(o.a,{disableRipple:!0,variant:"text",onClick:function(){return function(t){v.a.deletePaymentMethod(t.id).then((function(){e("Payment method deleted successfully!",{variant:"success"}),D()}))}(a)},className:t.actionButtonStyle,children:"Delete"})})]},a.id)}))})]})})})]})]})}},555:function(t,e,a){"use strict";var n=a(21),c=a.n(n),r=a(33),i=a(533),o=a(534),l=a(56),u=a.n(l),s=a(44),d=a(57),p=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,[{key:"getProfile",value:function(){return u.a.get("".concat(s.a,"/client-portal/patient"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updateProfile",value:function(t,e){return u.a.put("".concat(s.a,"/client-portal/patient/").concat(e),t,{headers:Object(d.a)()})}},{key:"getPractitioners",value:function(t){var e="".concat(s.a,"/client-portal/practitioners");return t&&(e="".concat(s.a,"/client-portal/practitioners/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPractitionerDates",value:function(t){var e="".concat(s.a,"/client-portal/practitioner-dates");return t&&(e="".concat(s.a,"/client-portal/practitioner-dates/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBookedAppointments",value:function(t,e){var a="".concat(s.a,"/client-portal/booked-appointments");return t&&(a="".concat(s.a,"/client-portal/booked-appointments?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(a,{headers:Object(d.a)(),params:e}).then((function(t){return t.data}))}},{key:"getAppointmentTypesByPractitionerId",value:function(t){return u.a.post("".concat(s.a,"/client-portal/appointment-types"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"bookAppointment",value:function(t){return u.a.post("".concat(s.a,"/client-portal/appointment"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updateAppointment",value:function(t,e){return u.a.put("".concat(s.a,"/client-portal/appointment/").concat(e),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getEncounters",value:function(t){var e="".concat(s.a,"/client-portal/encounters");return t&&(e="".concat(s.a,"/client-portal/encounters/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getLabDocuments",value:function(t){var e="".concat(s.a,"/client-portal/labs");return t&&(e="".concat(s.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createLabDocuments",value:function(t,e){var a="".concat(s.a,"/client-portal/labs");return t&&(a="".concat(s.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.post(a,e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBillings",value:function(t){var e="".concat(s.a,"/client-portal/billings");return t&&(e="".concat(s.a,"/client-portal/billings/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createBilling",value:function(t){return u.a.post("".concat(s.a,"/client-portal/billings"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBalance",value:function(t){var e="".concat(s.a,"/client-portal/balance");return t&&(e="".concat(s.a,"/client-portal/balance/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPaymentMethods",value:function(t){var e="".concat(s.a,"/patient-portal/payment-methods");return t&&(e="".concat(s.a,"/patient-portal/payment-methods/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPharmacies",value:function(){return u.a.get("".concat(s.a,"/client-portal/pharmacy"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"searchPharmacies",value:function(t){return u.a.post("".concat(s.a,"/client-portal/pharmacy/search"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updatePharmacy",value:function(t,e){return u.a.put("".concat(s.a,"/client-portal/pharmacy/").concat(t),e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getRequisitions",value:function(t){var e="".concat(s.a,"/client-portal/lab_requisitions");return t&&(e="".concat(s.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getLabBilling",value:function(t){var e="".concat(s.a,"/client-portal/lab_billing");return t&&(e="".concat(s.a,"/client-portal/lab_billing/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getTestList",value:function(t){var e="".concat(s.a,"/client-portal/lab_requisitions/test-list");return t&&(e="".concat(s.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getTestProfileInfo",value:function(){var t=Object(r.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(s.a,"/client-portal/lab_requisitions/test-profile-info?testId=").concat(e),t.next=3,u.a.get(a,{headers:Object(d.a)()});case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getProfileTests",value:function(){var t=Object(r.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(s.a,"/client-portal/lab_requisitions/profile-tests?testId=").concat(e),t.next=3,u.a.get(a,{headers:Object(d.a)()});case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHandouts",value:function(){return u.a.get("".concat(s.a,"/client-portal/handouts"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createHandouts",value:function(){return u.a.post("".concat(s.a,"/client-portal/handouts"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"deleteHandout",value:function(t){return u.a.delete("".concat(s.a,"/client-portal/handouts/").concat(t),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPrescriptions",value:function(){return u.a.get("".concat(s.a,"/client-portal/prescription"),{headers:Object(d.a)()}).then((function(t){return t.data}))}}]),t}();e.a=new p},558:function(t,e,a){"use strict";var n=a(0);e.a=function(t,e){var a=Object(n.useRef)(!1);Object(n.useEffect)((function(){a.current?t():a.current=!0}),e)}},573:function(t,e,a){"use strict";a(0);var n=a(426),c=a(439),r=a(578),i=a(1);function o(t){var e=t.country,a=t.size,o=t.handleChange,l=t.outlined,u=t.margin;return Object(i.jsx)(c.a,{size:a,id:"country",label:"Country",value:e,select:!0,onChange:function(t){return o("country",t.target.value)},fullWidth:!0,variant:l?"outlined":"standard",margin:u||"none",children:r.a.map((function(t){return Object(i.jsx)(n.a,{value:t,children:t[0]},t[0])}))})}o.defaultProps={size:"medium",country:null,outlined:!0,margin:"none"},e.a=o},574:function(t,e,a){"use strict";var n=a(29),c=(a(0),a(426)),r=a(439),i=a(1),o=function(t){return t?t[2].split("|").map((function(t){var e=t.split("~"),a=Object(n.a)(e,2),c=a[0];return[void 0===c?null:c,a[1]]})):[]};function l(t){var e=t.size,a=t.label,n=t.region,l=t.handleChange,u=t.outlined,s=t.country,d=t.margin;return Object(i.jsx)(r.a,{size:e,id:"state",label:a,value:n,select:!0,onChange:function(t){return l("region",t.target.value)},fullWidth:!0,variant:u?"outlined":"standard",margin:d||"none",children:o(s).map((function(t){return Object(i.jsx)(c.a,{value:t[1],children:t[0]},t[0])}))})}l.defaultProps={size:"medium",outlined:!0,margin:"none"},e.a=l},651:function(t,e,a){"use strict";var n=a(4),c=(a(0),a(439)),r=a(684),i=a.n(r),o=a(1),l=function(t){var e=t.className,a=t.disabled,r=t.required,l=t.fullWidth,u=t.type,s=t.name,d=t.label,p=t.autoFocus,b=t.margin,j=t.variant,h=t.value,f=t.mask,m=t.onChange;return Object(o.jsx)(i.a,{disabled:a,mask:f,value:h,onChange:m,children:function(t){return Object(o.jsx)(c.a,Object(n.a)(Object(n.a)({},t),{},{disabled:a,autoFocus:p,required:r,fullWidth:l,name:s,label:d,margin:b,type:u,className:e,variant:j}))}})};l.defaultProps={className:"",type:"text",name:"",label:"Label",margin:"normal",variant:"outlined",value:"",mask:"",autoFocus:!1,required:!1,disabled:!1,fullWidth:!1},e.a=l},777:function(t,e,a){"use strict";var n=a(533),c=a(534),r=a(56),i=a.n(r),o=a(44),l=a(57),u=function(){function t(){Object(n.a)(this,t)}return Object(c.a)(t,[{key:"getPaymentMethods",value:function(){return i.a.get("".concat(o.a,"/patient-portal/payment-methods"),{headers:Object(l.a)()}).then((function(t){return t.data}))}},{key:"createPaymentMethod",value:function(t){return i.a.post("".concat(o.a,"/patient-portal/payment-methods"),t,{headers:Object(l.a)()}).then((function(t){return t.data}))}},{key:"updatePaymentMethod",value:function(t,e){return i.a.put("".concat(o.a,"/patient-portal/payment-methods/").concat(t),e,{headers:Object(l.a)()}).then((function(t){return t.data}))}},{key:"deletePaymentMethod",value:function(t){return i.a.delete("".concat(o.a,"/patient-portal/payment-methods/").concat(t),{headers:Object(l.a)()}).then((function(t){return t.data}))}}]),t}();e.a=new u}}]);
//# sourceMappingURL=57.b1acf1e1.chunk.js.map