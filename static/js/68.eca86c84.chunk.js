(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[68],{1124:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(0),c=a(434),i=a(410),o=a(441),s=a(436),u=a(95),l=a(200),m=a.n(l),d=a(99),b=a(687),f=a(608),h=a(84),j=a(25),p=a(414),O=a(457),g=a(450),v=a(438),x=a(454),y=a(439),S=a(577),k=a(195),w=a.n(k),N=a(64),P=a(557),C=a(1),T=function(e){var t=e.fieldName,a=e.label,n=e.value,r=e.handleOnChange,c=e.handleOnBlur,i=e.errors,o=e.type,s=e.id;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(y.a,{value:n,variant:"outlined",margin:"dense",required:!0,fullWidth:!0,id:s||t,label:a,name:t,type:o||"text",autoComplete:t,onChange:r,onBlur:c}),Object(C.jsx)(P.a,{errors:i})]})};T.defaultProps={id:null,value:null,type:null};var E=T,I=Object(s.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},formSectionTitle:{marginBottom:e.spacing(1)},personalFormTitle:{marginBottom:e.spacing(1),marginTop:e.spacing(2)},checkbox:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),B=function(e){var t=e.onFormSubmit,a=Object(j.a)(e,["onFormSubmit"]).errors,c=I(),i=Object(r.useState)(""),o=Object(n.a)(i,2),s=o[0],l=o[1],m=Object(r.useState)(""),d=Object(n.a)(m,2),f=d[0],k=d[1],P=Object(r.useState)(""),T=Object(n.a)(P,2),B=T[0],L=T[1],F=Object(r.useState)(""),W=Object(n.a)(F,2),A=W[0],q=W[1],V=Object(r.useState)(""),J=Object(n.a)(V,2),R=J[0],Y=J[1],z=Object(r.useState)(""),M=Object(n.a)(z,2),U=M[0],D=M[1],_=Object(r.useState)(""),G=Object(n.a)(_,2),H=G[0],K=G[1],Q=Object(r.useState)(""),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(!1),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],re=Object(r.useState)([]),ce=Object(n.a)(re,2),ie=ce[0],oe=ce[1];Object(r.useEffect)((function(){var e=Object(N.G)(s),t=Object(N.r)(e.trim());q(t)}),[s]);var se=a&&a.filter((function(e){return e.param.includes("client")})),ue=a&&a.filter((function(e){return e.param.includes("user")})),le=function(e,t){var a="client.".concat(t);return e&&(a="".concat(e,".").concat(t)),ie&&ie.filter((function(e){return e.param===a}))},me=function(e,t){e.target&&b.a.validate({fieldName:e.target.name,value:e.target.value,target:t||"client"}).then((function(e){var t=ie.filter((function(t){return t.param!==e.data.message.param}));oe(t)}),(function(e){if(e.response){var t=w.a.uniqWith([].concat(Object(h.a)(ie),[e.response.data.message]),w.a.isEqual);oe(t)}else console.error(e)})).catch((function(e){console.error("catch err",e)}))};return Object(C.jsxs)("form",{className:c.form,noValidate:!0,onSubmit:function(e){return function(e){e.preventDefault();var a={client:{name:s.trim(),phone:f.trim(),website:B.trim(),code:A.trim()},user:{firstname:R.trim(),lastname:U.trim(),email:H.trim(),password:Z.trim()}};t(a)}(e)},children:[Object(C.jsx)(u.a,{component:"h3",variant:"h4",color:"textPrimary",className:c.formSectionTitle,children:"Practice Information"}),se&&se.map((function(e,t){return Object(C.jsx)(S.a,{severity:"error",children:e.msg},t)})),Object(C.jsx)(E,{fieldName:"name",label:"Practice Name",value:s,handleOnChange:function(e){return l(e.target.value)},handleOnBlur:function(e){return me(e)},errors:le("client","name"),inputProps:{maxLength:35},helperText:"".concat(s.length>=35?"Enter a name between 35 charecter":"")}),Object(C.jsx)(E,{fieldName:"phone",label:"Practice Phone",value:f,handleOnChange:function(e){return k(e.target.value)},handleOnBlur:function(e){return me(e)},errors:le("client","phone"),inputProps:{maxLength:15},helperText:"".concat(f.length>=15?"Enter a number between 15 charecter":"")}),Object(C.jsx)(E,{fieldName:"website",label:"Practice Website URL",value:B,handleOnChange:function(e){return L(e.target.value)},handleOnBlur:function(e){return me(e)},errors:le("client","website"),inputProps:{maxLength:1e3},helperText:"".concat(B.length>=1e3?"Enter an url between 1000 charecter":"")}),Object(C.jsx)(u.a,{component:"h3",variant:"h4",color:"textPrimary",className:c.personalFormTitle,children:"Your Personal Information"}),ue&&ue.map((function(e,t){return Object(C.jsx)(S.a,{severity:"error",children:e.msg},t)})),Object(C.jsx)(y.a,{value:R,variant:"outlined",margin:"dense",fullWidth:!0,id:"firstName",label:"Your Firstname",name:"firstName",autoComplete:"firstName",onChange:function(e){return Y(e.target.value)},inputProps:{maxLength:35},helperText:"".concat(R.length>=35?"Enter a first name between 35 charecter":"")}),Object(C.jsx)(y.a,{value:U,variant:"outlined",margin:"dense",fullWidth:!0,id:"lastName",label:"Your Lastname",name:"lastName",autoComplete:"lastName",onChange:function(e){return D(e.target.value)},inputProps:{maxLength:35},helperText:"".concat(U.length>=35?"Enter a last name between 35 charecter":"")}),Object(C.jsx)(E,{id:"userEmail",fieldName:"email",label:"Your Email Address",value:H,handleOnChange:function(e){return K(e.target.value)},handleOnBlur:function(e){return me(e,"user")},errors:le("user","email"),inputProps:{maxLength:255},helperText:"".concat(H.length>=255?"Enter an email between 255 charecter":"")}),Object(C.jsx)(E,{fieldName:"password",label:"Your Password",type:"password",value:Z,handleOnChange:function(e){return $(e.target.value)},handleOnBlur:function(e){return function(e){if(e.target.value.length<8)oe([].concat(Object(h.a)(ie),[{value:e.target.value,msg:"Too Weak. Must be atleast 8 Characters",param:"user.password"}]));else{var t=ie.filter((function(e){return"user.password"!==e.param}));oe(t)}}(e)},errors:le("user","password"),inputProps:{maxLength:90},helperText:"".concat(Z.length>=90?"Enter a password between 90 charecter":"")}),Object(C.jsx)(g.a,{control:Object(C.jsx)(O.a,{value:"remember",color:"primary"}),label:Object(C.jsx)("div",{children:Object(C.jsxs)("span",{children:["Check here to indicate that you have read and agree to the terms of the"," ",Object(C.jsx)(x.a,{href:"/agreement",children:"Customer Agreement"})]})}),className:c.checkbox,onChange:function(){return ne(!ae)}}),Object(C.jsx)(p.a,{disabled:ie.length>0||!ae,fullWidth:!0,variant:"contained",color:"primary",className:c.submit,type:"submit",children:"Sign up"}),Object(C.jsx)(v.a,{container:!0,children:Object(C.jsx)(v.a,{item:!0,xs:!0,children:Object(C.jsx)(x.a,{href:"/login_client",variant:"body2",children:"Already a member? Login here"})})})]})};B.defaultProps={onFormSubmit:function(){},errors:null};var L=B,F=a(420),W=a(421),A=a(630),q=Object(s.a)((function(e){return{root:{margin:e.spacing(3),textAlign:"center","& p":{fontSize:"16px",lineHeight:"24px"}}}})),V=function(e){var t=e.user,a=q(),c=Object(d.b)().enqueueSnackbar,i=Object(r.useState)(null),o=Object(n.a)(i,2),s=o[0],u=o[1],l=Object(r.useState)(!1),m=Object(n.a)(l,2),b=m[0],h=m[1];return Object(C.jsxs)(F.a,{className:a.root,variant:"outlined",children:[Object(C.jsxs)(W.a,{children:[s&&Object(C.jsx)(S.a,{severity:s.status||"error",children:s.message}),Object(C.jsx)("p",{children:"Thank you for signing up. "}),Object(C.jsx)("p",{children:"Please confirm your email address by clicking one of the email just emailed you."}),Object(C.jsx)("p",{children:Object(C.jsx)(p.a,{onClick:function(){return h(!0),void f.a.resendEmailVerification(t).then((function(e){u(e.data),c(e.data.message,{variant:"success"}),h(!1)}),(function(e){u(e.response)}))},color:"primary",children:"Resend confirmation email"})})]}),Object(C.jsx)(A.a,{isOpen:b})]})},J=Object(s.a)((function(e){return{pageTitle:{marginBottom:e.spacing(3)},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"transparent",color:e.palette.text.secondary},lockIcon:{fontSize:"40px"}}}));t.default=function(){var e=J(),t=Object(d.b)().enqueueSnackbar,a=Object(r.useState)([]),s=Object(n.a)(a,2),l=s[0],h=s[1],j=Object(r.useState)([]),p=Object(n.a)(j,2),O=p[0],g=p[1],v=Object(r.useState)(!1),x=Object(n.a)(v,2),y=x[0],S=x[1];return Object(C.jsxs)(i.a,{component:"main",maxWidth:"xs",children:[Object(C.jsx)(o.a,{}),Object(C.jsxs)("div",{className:e.paper,children:[Object(C.jsx)(c.a,{className:e.avatar,children:Object(C.jsx)(m.a,{className:e.lockIcon})}),Object(C.jsx)(u.a,{component:"h1",variant:"h2",className:e.pageTitle,children:"Physician Sign Up"}),y?Object(C.jsx)(V,{user:l}):Object(C.jsx)(L,{onFormSubmit:function(e){b.a.register(e).then((function(e){e.data&&(S(!0),function(e){f.a.sendEmailVerification(e).then((function(e){S(!0),t("".concat(e.data.message),{variant:"success"})}),(function(e){S(!1),t("".concat(e.response.data),{variant:"error"})}))}(e.data.data.user),h(e.data.data.user)),t("".concat(e.data.message),{variant:"success"})}),(function(e){e.response&&g(e.response.data.message)}))},errors:O})]})]})}},557:function(e,t,a){"use strict";a(0);var n=a(577),r=a(1),c=function(e){var t=e.errors,a=e.variant,c=e.children;return Object(r.jsx)(r.Fragment,{children:t&&t.map((function(e,t){return Object(r.jsxs)(n.a,{severity:"error",variant:a,children:[e.msg,c]},t)}))})};c.defaultProps={errors:null,children:null,variant:"outlined"},t.a=c},608:function(e,t,a){"use strict";var n=a(533),r=a(534),c=a(56),i=a.n(c),o=a(44),s=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"sendEmailVerification",value:function(e){return i.a.post("".concat(o.a,"/email/send/verification/"),e)}},{key:"resendEmailVerification",value:function(e){return i.a.post("".concat(o.a,"/email/resend/verification/"),e)}},{key:"emailVerify",value:function(e,t){return i.a.get("".concat(o.a,"/email/confirmation/").concat(e,"/").concat(t))}}]),e}();t.a=new s},630:function(e,t,a){"use strict";a(0);var n=a(334),r=a(422),c=a(436),i=a(1),o=Object(c.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));t.a=function(e){var t=e.isOpen,a=o();return Object(i.jsx)(n.a,{className:a.backdrop,open:t,onClick:function(){},children:Object(i.jsx)(r.a,{color:"inherit"})})}},687:function(e,t,a){"use strict";var n=a(21),r=a.n(n),c=a(33),i=a(533),o=a(534),s=a(56),u=a.n(s),l=a(44),m=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(l.a,"/auth/login"),{email:t.email,password:t.password});case 2:if(!(a=e.sent).data){e.next=6;break}return a.data.data.accessToken&&localStorage.setItem("user",JSON.stringify(a.data.data)),e.abrupt("return",a.data);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"passwordChangeRequest",value:function(e){return u.a.post("".concat(l.a,"/auth/reset_password/user/").concat(e))}},{key:"resetPassword",value:function(e,t,a){return u.a.post("".concat(l.a,"/auth/reset/").concat(e,"/").concat(t),{password:a})}},{key:"register",value:function(e){return u.a.post("".concat(l.a,"/auth/signup"),e)}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"checkAuth",value:function(){var e=JSON.parse(localStorage.getItem("user"));return!(!e||!e.accessToken)}},{key:"validate",value:function(e){return u.a.post("".concat(l.a,"/auth/field/validate"),e)}}]),e}();t.a=new m}}]);
//# sourceMappingURL=68.eca86c84.chunk.js.map