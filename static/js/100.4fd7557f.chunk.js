(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[100],{1109:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return he}));var a=n(29),o=n(13),c=n(0),i=n(414),r=n(410),l=n(441),s=n(438),d=n(436),p=n(95),u=n(195),b=n.n(u),j=n(533),m=n(534),h=n(56),f=n.n(h),x=n(44),O=n(57),g=new(function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,[{key:"getAll",value:function(){return f.a.get("".concat(x.a,"/appointment-types"),{headers:Object(O.a)()}).then((function(e){return e.data}))}},{key:"create",value:function(e){return f.a.post("".concat(x.a,"/appointment-types"),e,{headers:Object(O.a)()})}},{key:"update",value:function(e,t){return f.a.put("".concat(x.a,"/appointment-types/").concat(t),e,{headers:Object(O.a)()})}},{key:"deleteById",value:function(e){return f.a.delete("".concat(x.a,"/appointment-types/").concat(e),{headers:Object(O.a)()})}}]),e}()),y=n(413),v=n(97),w=n(7),k=n(442),C=n(446),N=n(445),_=n(447),S=n(443),T=n(444),A=n(459),E=n(541),z=n.n(E),F=n(554),B=n.n(F),W=n(43),L=n.n(W),M=n(1),D=Object(d.a)((function(e){return{tableContainer:{minWidth:650,marginTop:e.spacing(2)},actions:{textAlign:"center",display:"flex",border:"none","& button":{fontSize:"12px"}},overflowControl:{maxWidth:"130px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}})),P=Object(w.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0,0,0,0.87)",boxShadow:e.shadows[1],fontSizw:13}}}))(A.a),R=Object(w.a)((function(e){return{head:{backgroundColor:e.palette.grey,color:e.palette.grey,fontSize:"12px",fontWeight:700},body:{fontSize:14}}}))(N.a),H=Object(w.a)((function(e){return{root:{fontSize:14,"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& th":{fontSize:12},"& td":{fontSize:12,height:"50px"}}}}))(T.a),I=function(e){var t=e.appointments,n=e.onEdit,a=e.onDelete,o=D();return Object(M.jsx)(_.a,{component:v.a,className:o.tableContainer,children:Object(M.jsxs)(k.a,{size:"small",className:o.table,"aria-label":"a dense table",children:[Object(M.jsx)(S.a,{children:Object(M.jsxs)(T.a,{children:[Object(M.jsx)(R,{padding:"checkbox",children:"Appointment Type"}),Object(M.jsx)(R,{padding:"checkbox",align:"center",children:"Description"}),Object(M.jsx)(R,{padding:"checkbox",children:"Minutes"}),Object(M.jsx)(R,{padding:"checkbox",children:"Fee"}),Object(M.jsx)(R,{padding:"checkbox",children:"Patient Schedule"}),Object(M.jsx)(R,{padding:"checkbox",align:"center",children:"Note"}),Object(M.jsx)(R,{padding:"checkbox",children:"Status"}),Object(M.jsx)(R,{padding:"checkbox",children:"Created"}),Object(M.jsx)(R,{padding:"checkbox",children:"Created By"}),Object(M.jsx)(R,{padding:"checkbox",children:"Updated"}),Object(M.jsx)(R,{padding:"checkbox",children:"Updated By"}),Object(M.jsx)(R,{padding:"checkbox",children:"Actions"})]})}),Object(M.jsx)(C.a,{children:t.map((function(e){var t;return Object(M.jsxs)(H,{children:[Object(M.jsx)(N.a,{padding:"checkbox",component:"th",scope:"row",children:e.appointment_type}),e.descr&&e.descr.length>0?Object(M.jsx)(P,{title:e.descr,children:Object(M.jsx)(N.a,{padding:"checkbox",className:o.overflowControl,align:"center",children:e.descr})}):Object(M.jsx)(N.a,{padding:"checkbox",className:o.overflowControl,align:"center",children:e.descr||""}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.length}),Object(M.jsx)(N.a,{padding:"checkbox",children:"$".concat(null===(t=e.fee)||void 0===t?void 0:t.toFixed(2))}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.allow_patients_schedule?"Yes":"No"}),e.note&&e.note.length>0?Object(M.jsx)(P,{title:e.note,children:Object(M.jsx)(N.a,{padding:"checkbox",className:o.overflowControl,align:"center",children:e.note})}):Object(M.jsx)(N.a,{padding:"checkbox",className:o.overflowControl,align:"center",children:e.note||""}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.active?"Active":"-"}),Object(M.jsx)(N.a,{padding:"checkbox",children:L()(e.created).format("lll")}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.created_user}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.updated?L()(e.updated).format("lll"):"-"}),Object(M.jsx)(N.a,{padding:"checkbox",children:e.updated_user||"-"}),Object(M.jsxs)(N.a,{padding:"checkbox",className:o.actions,children:[Object(M.jsx)(y.a,{"aria-label":"edit",className:o.margin,onClick:function(){return n(e.id)},children:Object(M.jsx)(B.a,{fontSize:"default"})}),Object(M.jsx)(y.a,{"aria-label":"delete",className:o.margin,onClick:function(){return a(e.id)},children:Object(M.jsx)(z.a,{fontSize:"default"})})]})]},e.id)}))})]})})},K=n(455),U=n(452),Y=n(456),q=n(458),J=n(451),G=n(99),X=Object(d.a)((function(e){return{title:{backgroundColor:e.palette.error.light,"& h2":{color:"#fff"}},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),fontSize:"18px"},modalAction:{borderTop:"1px solid ".concat(e.palette.background.default)}}})),$=function(e){var t=e.isOpen,n=e.onClose,a=e.id,o=X(),c=Object(G.b)().enqueueSnackbar;return Object(M.jsx)("div",{children:Object(M.jsxs)(K.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(J.a,{id:"alert-dialog-title",className:o.title,children:"Are you sure about deleting this appointment type?"}),Object(M.jsx)(Y.a,{className:o.content,children:Object(M.jsx)(q.a,{id:"alert-dialog-description",children:"Your appointment type will be deleted forever from our system and you won't be able to access it anymore."})}),Object(M.jsxs)(U.a,{className:o.modalAction,children:[Object(M.jsx)(i.a,{onClick:function(){return n("no")},color:"primary",children:"No"}),Object(M.jsx)(i.a,{onClick:function(){g.deleteById(a).then((function(e){c("".concat(e.data.message),{variant:"success"}),n()}))},color:"primary",autoFocus:!0,children:"Yes"})]})]})})},Q=n(4),V=n(25),Z=n(9),ee=n(328),te=n(469),ne=n(30),ae=n(453),oe=n(439),ce=n(577),ie=n(3),re=n(16),le=n(64),se=Object(d.a)((function(e){return{title:{backgroundColor:e.palette.primary.light,"& h2":{color:"#fff"}},root:{width:"500px"},shiftRootContent:{width:"500px",minWidth:0},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),fontSize:"18px"},formControl:{display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary,"& .MuiSelect-select":{minWidth:120}},switchControl:{display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary,marginBottom:e.spacing(1.5),marginTop:e.spacing(1.5),"& .MuiSelect-select":{minWidth:120}},formLabel:{fontSize:"14px",fontWeight:"600",width:"220px"},formHelperText:{fontSize:"12px",paddingLeft:"16px"},formField:{flex:1},modalAction:{borderTop:"1px solid ".concat(e.palette.background.default),display:"flex",justifyContent:"space-between",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},largeFormField:{flex:1},smallFormField:{maxWidth:"100px",flex:1},textArea:{marginTop:"12px"},cancelButton:{borderColor:Z.a.orange[600],color:Z.a.orange[600]}}})),de=function(e){var t,n=e.isOpen,r=e.onClose,l=e.isNewAppointment,s=Object(V.a)(e,["isOpen","onClose","isNewAppointment"]),d=se(),p=Object(ne.a)(),u=Object(ee.a)(p.breakpoints.up("sm"),{defaultMatches:!0}),b=Object(re.a)().user,j=Object(G.b)().enqueueSnackbar,m=s.savedAppointments,h=Object(c.useState)([]),f=Object(a.a)(h,2),x=f[0],O=f[1],y=Object(c.useState)([]),v=Object(a.a)(y,2),w=v[0],k=v[1],C=Object(c.useState)(!1),N=Object(a.a)(C,2),_=N[0],S=N[1];Object(c.useEffect)((function(){var e=Object(Q.a)(Object(Q.a)({},s.appointment),{},{length:s.appointment.length||30,sort_order:1,allow_patients_schedule:!0,active:!0,note:s.appointment.note||""});O(e)}),[s.appointment]);var T=function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";return"new"===a?null===m||void 0===m||null===(n=m.map((function(e){return x.appointment_type===e.appointment_type})))||void 0===n?void 0:n.includes(!0):null===m||void 0===m||null===(e=m.filter((function(e){return e.id!==x.id})))||void 0===e||null===(t=e.map((function(e){return x.appointment_type===e.appointment_type})))||void 0===t?void 0:t.includes(!0)},A=function(){var e,t={data:Object(le.F)({appointment_type:x.appointment_type,descr:x.descr,length:x.length,fee:x.fee,sort_order:x.sort_order,allow_patients_schedule:x.allow_patients_schedule?1:0,note:x.note,active:x.active?1:0,created_user_id:b.id,client_id:b.client_id})};l?T("new")?S(!0):(e=t,g.create(e).then((function(e){j("".concat(e.data.message),{variant:"success"}),r()}),(function(e){k(e.response.data.message)}))):T("update")?S(!0):(delete t.data.created_user_id,g.update(t,s.appointment.id).then((function(e){j("".concat(e.data.message),{variant:"success"}),r()})))},E=function(e){O(Object(Q.a)(Object(Q.a)({},x),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(M.jsxs)(K.a,{open:n,onClose:function(){S(),k([]),O([]),r()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(J.a,{id:"alert-dialog-title",className:d.title,children:l?"New Appointment Type":"Edit Appointment Type"}),Object(M.jsxs)(Y.a,{className:d.content,children:[Object(M.jsx)(q.a,{id:"alert-dialog-description",children:l?"This page is used to create a new appointment type":"This page is used to update an appointment type"}),w&&w.map((function(e,t){return Object(M.jsx)(ce.a,{severity:"error",children:e.msg},t)})),Object(M.jsxs)("div",{className:Object(ie.a)((t={},Object(o.a)(t,d.root,!0),Object(o.a)(t,d.shiftRootContent,u),t)),children:[Object(M.jsx)(te.a,{component:"div",className:d.formControl,children:Object(M.jsx)(oe.a,{autoFocus:!0,className:d.largeFormField,variant:"outlined",label:"Appointment Type",margin:"normal",fullWidth:!0,name:"appointment_type",id:"appointment_type",autoComplete:"appointment_type",onChange:function(e){return E(e)},value:x.appointment_type,size:"small",error:_,helperText:_?"You entered a duplicate type":""})}),Object(M.jsx)(te.a,{component:"div",className:"".concat(d.formControl," ").concat(d.textArea),children:Object(M.jsx)(oe.a,{fullWidth:!0,variant:"outlined",label:"Description",multiline:!0,name:"descr",rows:8,rowsMax:50,value:x.descr,onChange:function(e){return E(e)}})}),Object(M.jsxs)(te.a,{component:"div",className:d.formControl,children:[Object(M.jsx)(oe.a,{className:d.smallFormField,variant:"outlined",label:"Minutes",margin:"normal",name:"length",id:"length",type:"number",autoComplete:"length",onChange:function(e){return E(e)},value:x.length,size:"small"}),Object(M.jsx)("p",{className:d.formHelperText,children:"Number of minutes for the appointment"})]}),Object(M.jsxs)(te.a,{component:"div",className:d.formControl,children:[Object(M.jsx)(oe.a,{className:d.smallFormField,variant:"outlined",label:"Fee",margin:"normal",name:"fee",id:"fee",type:"number",autoComplete:"fee",onChange:function(e){return E(e)},value:x.fee,size:"small"}),Object(M.jsx)("p",{className:d.formHelperText,children:"The fee for the appointment"})]}),Object(M.jsxs)(te.a,{component:"div",className:d.formControl,children:[Object(M.jsx)(oe.a,{className:d.smallFormField,variant:"outlined",label:"Sort Order",margin:"normal",name:"sort_order",id:"sort_order",autoComplete:"sort_order",onChange:function(e){return E(e)},value:x.sort_order,size:"small",type:"number"}),Object(M.jsx)("p",{className:d.formHelperText,children:"The order in which this is shown"})]}),Object(M.jsxs)(te.a,{component:"div",className:d.switchControl,children:[Object(M.jsx)(ae.a,{size:"small",checked:x.allow_patients_schedule,onChange:function(e){return O(Object(Q.a)(Object(Q.a)({},x),{},Object(o.a)({},e.target.name,!x.allow_patients_schedule)))},name:"allow_patients_schedule",color:"primary",inputProps:{"aria-label":"primary checkbox"}}),Object(M.jsx)("p",{className:d.formHelperText,children:"Allow patient to select this in the patient portal"})]}),Object(M.jsxs)(te.a,{component:"div",className:d.switchControl,children:[Object(M.jsx)(ae.a,{size:"small",checked:x.active,onChange:function(e){return O(Object(Q.a)(Object(Q.a)({},x),{},Object(o.a)({},e.target.name,!x.active)))},name:"active",color:"primary",inputProps:{"aria-label":"primary checkbox"}}),Object(M.jsx)("p",{className:d.formHelperText,children:"Status can be active or inactive"})]}),Object(M.jsx)(te.a,{component:"div",className:"".concat(d.formControl," ").concat(d.textArea),children:Object(M.jsx)(oe.a,{fullWidth:!0,variant:"outlined",label:"Note",multiline:!0,name:"note",rows:4,rowsMax:50,value:x.note,onChange:function(e){return E(e)}})})]})]}),Object(M.jsxs)(U.a,{className:d.modalAction,children:[Object(M.jsx)(i.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return A()},children:l?"Save":"Update"}),Object(M.jsx)(i.a,{size:"small",variant:"outlined",onClick:function(){return r()},className:d.cancelButton,children:"Cancel"})]})]})},pe=["INPUT","TEXTAREA"];function ue(e){e&&e.stopPropagation&&e.stopPropagation(),window.event&&(window.event.cancelBubble=!0)}var be=function(e,t){switch(t.type){case"set-key-down":return Object(Q.a)(Object(Q.a)({},e),{},Object(o.a)({},t.key,!0));case"set-key-up":return Object(Q.a)(Object(Q.a)({},e),{},Object(o.a)({},t.key,!1));case"reset-keys":return Object(Q.a)({},t.data);default:return e}},je=function(e,t,n){if(!Array.isArray(e))throw new Error('The first parameter to "useKeyboardShortcut" must be an ordered array of "KeyboardEvent.key" strings.');if(!e.length)throw new Error('The first parameter to "useKeyboardShortcut" must contain atleast one "KeyboardEvent.key" string.');if(!t||"function"!==typeof t)throw new Error('The second parameter to "useKeyboardShortcut" must be\n       a function that will be envoked when the keys are pressed.');var o=(n||{}).overrideSystem,i=e.reduce((function(e,t){var n=e;return n[t.toLowerCase()]=!1,n}),{}),r=Object(c.useReducer)(be,i),l=Object(a.a)(r,2),s=l[0],d=l[1],p=Object(c.useCallback)((function(e){return function(t){var n=e.toLowerCase();t.repeat||pe.includes(t.target.tagName)||n===t.key.toLowerCase()&&void 0!==s[n]&&(o&&(t.preventDefault(),ue(t)),d({type:"set-key-down",key:n}))}}),[s,o]),u=Object(c.useCallback)((function(e){return function(t){var n=e.toLowerCase();pe.includes(t.target.tagName)||t.key.toLowerCase()===n&&void 0!==s[n]&&(o&&(t.preventDefault(),ue(t)),d({type:"set-key-up",key:n}))}}),[s,o]);Object(c.useEffect)((function(){Object.values(s).filter((function(e){return!e})).length?d({type:null}):(t(s),d({type:"reset-keys",data:i}))}),[t,s,i]),Object(c.useEffect)((function(){return e.forEach((function(e){return window.addEventListener("keydown",p(e))})),function(){return e.forEach((function(e){return window.removeEventListener("keydown",p(e))}))}}),[p,e]),Object(c.useEffect)((function(){return e.forEach((function(e){return window.addEventListener("keyup",u(e))})),function(){return e.forEach((function(e){return window.removeEventListener("keyup",u(e))}))}}),[u,e])},me=Object(d.a)((function(e){return{root:{flexGrow:1,padding:"25px 0px"},uploadButtons:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"450px",marginBottom:e.spacing(1),"& h1":Object(o.a)({},e.breakpoints.up("md"),{marginRight:e.spacing(4)})},card:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"}}}));function he(){var e=me(),t=Object(c.useState)(""),n=Object(a.a)(t,2),o=n[0],d=n[1],u=Object(c.useState)({}),j=Object(a.a)(u,2),m=j[0],h=j[1],f=Object(c.useState)(!1),x=Object(a.a)(f,2),O=x[0],y=x[1],v=Object(c.useState)(!1),w=Object(a.a)(v,2),k=w[0],C=w[1],N=Object(c.useState)([]),_=Object(a.a)(N,2),S=_[0],T=_[1],A=Object(c.useState)(!0),E=Object(a.a)(A,2),z=E[0],F=E[1],B=function(){g.getAll().then((function(e){T(e.data)}))};Object(c.useEffect)((function(){B()}),[]);var W=function(){y(!0),F(!0),h("")};return je(["N"],(function(){W()}),{overrideSystem:!0}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(l.a,{}),Object(M.jsxs)(r.a,{maxWidth:!1,className:e.root,children:[Object(M.jsxs)("div",{className:e.uploadButtons,children:[Object(M.jsx)(p.a,{component:"h1",variant:"h2",color:"textPrimary",children:"Appointment Types"}),Object(M.jsx)(i.a,{variant:"contained",color:"primary",component:"span",onClick:function(){return W()},children:"New"})]}),Object(M.jsx)(s.a,{container:!0,justify:"center",spacing:2,children:Object(M.jsxs)(s.a,{item:!0,md:12,xs:12,children:[Object(M.jsx)(p.a,{component:"p",variant:"body2",color:"textPrimary",children:"This page is used to manage appointment types that are offered to patients"}),Object(M.jsx)(I,{appointments:S,onEdit:function(e){y(!0),F(!1);var t=S.filter((function(t){return t.id===e}));t&&h(b.a.head(t))},onDelete:function(e){C(!0),d(e)}})]})}),Object(M.jsx)(de,{appointment:m,isOpen:O,onClose:function(){return y(!1),F(!1),void B()},isNewAppointment:z,savedAppointments:S}),Object(M.jsx)($,{id:o,isOpen:k,onClose:function(){return C(!1),void B()}})]})]})}}}]);
//# sourceMappingURL=100.4fd7557f.chunk.js.map