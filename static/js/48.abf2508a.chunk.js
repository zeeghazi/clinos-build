(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[48],{1142:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return q}));var a=n(84),c=n(29),i=n(4),r=n(0),o=n.n(r),l=n(436),s=n(7),u=n(438),d=n(95),p=n(414),b=n(162),f=n(442),j=n(446),h=n(445),m=n(447),O=n(443),g=n(444),x=n(43),v=n.n(x),y=n(99),k=n(553),_=n(16),S=n(558),C=n(555),w=n(1029),B=n(756),P=n.n(B),N=n(694),L=n.n(N),z=n(631),D=n(1);z.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(z.c.version,"/pdf.worker.js");var H=Object(l.a)((function(t){return{appBar:{textAlign:"right"},title:{marginLeft:t.spacing(2),flex:1,justifyContent:"space-between"},PDFViewer:{marginTop:t.spacing(2),marginBottom:t.spacing(2),marginLeft:t.spacing(2),display:"grid",gridTemplateColumns:"max-content",justifyContent:"center",alignContent:"center"},PaginationWrap:{display:"flex",justifyContent:"center"},documentPage:{background:"red",textAlign:"center"}}})),A=function(t){var e=t.documentName,n=t.patientId,a=H(),i=Object(y.b)().enqueueSnackbar,o=Object(r.useState)(""),l=Object(c.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(null),p=Object(c.a)(d,2),b=p[0],f=p[1],j=Object(r.useState)(1),h=Object(c.a)(j,2),m=h[0],O=h[1],g=Object(r.useState)(""),x=Object(c.a)(g,2),v=x[0],k=x[1],_=Object(r.useState)(580),S=Object(c.a)(_,2),C=S[0],B=S[1],N=Object(r.useRef)(null);Object(r.useEffect)((function(){var t="".concat("http://localhost:5000/","static/patient/pid").concat(n,"_").concat(e);u(t);var a,c=(a=t).substring(a.lastIndexOf(".")+1);k(c)}),[e,n]);var A=function(){N&&N.current&&B(N.current.getBoundingClientRect().width)};return Object(r.useEffect)((function(){return window.addEventListener("resize",P()(A,3e3)),A(),function(){window.removeEventListener("resize",P()(A,3e3))}}),[]),Object(D.jsx)(D.Fragment,{children:v&&"pdf"===v?Object(D.jsxs)("div",{className:a.PDFViewer,ref:N,children:[Object(D.jsx)(z.a,{file:s,onLoadSuccess:function(t){var e=t.numPages;f(e)},children:Object(D.jsx)(z.b,{pageNumber:m,width:C})}),b&&Object(D.jsx)("div",{className:a.PaginationWrap,children:Object(D.jsx)(w.a,{count:b,shape:"rounded",onChange:function(t,e){O(e)}})})]}):Object(D.jsx)(L.a,{fileType:v,filePath:s,onError:function(t){i(t,{variant:"error"}),console.error("onError",t)}})})},T=o.a.forwardRef((function(t,e){return Object(D.jsx)(b.a,Object(i.a)({direction:"up",ref:e},t))})),E=Object(l.a)((function(t){return{root:{flexGrow:1,padding:"40px 0px"},title:{paddingBottom:t.spacing(1)},tab:{paddingBottom:5,margin:"5px 16px 5px 0",fontSize:14,cursor:"pointer"},tabSelected:{paddingBottom:0,margin:"5px 16px 6px 0",fontSize:14,cursor:"pointer",borderBottom:"2px solid ".concat(t.palette.primary.main)},newButton:{fontSize:"14px",marginLeft:t.spacing(4)}}})),F=Object(s.a)((function(){return{head:{whiteSpace:"nowrap",fontSize:16,fontWeight:700,padding:"6px 24px 6px 2px",borderBottom:"unset"},body:{fontSize:14,borderBottom:"unset"}}}))(h.a),I=Object(s.a)((function(){return{root:{fontSize:14,cursor:"pointer","& th":{fontSize:14,whiteSpace:"nowrap",padding:"2px 16px 2px 2px",lineHeight:"16px"},"& td":{fontSize:14,whiteSpace:"nowrap",padding:"2px 16px 2px 2px",lineHeight:"16px"}}}}))(g.a),q=function(){var t=E(),e=Object(y.b)().enqueueSnackbar,n=Object(_.a)(),i=n.lastVisitedPatient,o=n.user,l=Object(r.useState)([]),s=Object(c.a)(l,2),b=s[0],h=s[1],x=Object(r.useState)(0),w=Object(c.a)(x,2),B=w[0],P=w[1],N=Object(r.useState)([]),L=Object(c.a)(N,2),z=L[0],H=L[1],q=Object(r.useState)(!1),M=Object(c.a)(q,2),R=M[0],W=M[1],Y=Object(r.useState)(""),V=Object(c.a)(Y,2),G=V[0],J=V[1],U=Object(r.useCallback)((function(){C.a.getLabDocuments(i).then((function(t){h(t.data)}))}),[i]),K=Object(r.useCallback)((function(t){if(0===t){var e=b.filter((function(t){return"D"!==t.status}));H(Object(a.a)(e))}else if(1===t){var n=b.filter((function(t){return"L"===t.type&&"D"!==t.status}));H(Object(a.a)(n))}else if(2===t){var c=b.filter((function(t){return"I"===t.type&&"D"!==t.status}));H(Object(a.a)(c))}else if(3===t){var i=b.filter((function(t){return"L"!==t.type&&"M"!==t.type&&"I"!==t.type&&"D"!==t.status}));H(Object(a.a)(i))}else if(4===t){var r=b.filter((function(t){return"M"===t.type&&"D"!==t.status}));H(Object(a.a)(r))}}),[b]);Object(r.useEffect)((function(){U()}),[U]),Object(S.a)((function(){K(B)}),[b]);var Q=function(t){t!==B&&K(t),P(t)};return Object(D.jsxs)("div",{className:t.root,children:[Object(D.jsx)(u.a,{item:!0,sm:6,xs:12,children:Object(D.jsxs)(u.a,{container:!0,justify:"flex-start",children:[Object(D.jsx)(d.a,{component:"h1",variant:"h2",color:"textPrimary",className:t.title,children:"Documents / Lab Results"}),Object(D.jsxs)(p.a,{component:"label",variant:"outlined",color:"primary",className:t.newButton,children:["New",Object(D.jsx)("input",{type:"file",id:"file",accept:".pdf, .txt, .doc, .docx, image/*",hidden:!0,onChange:function(t){return function(t){var n=t.target.files;if(n&&n.length){var a=new FormData;a.append("file",n[0]),C.a.createLabDocuments(i,a).then((function(t){e("".concat(t.message),{variant:"success"}),U()})).catch((function(t){var n=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();e("".concat(n),{variant:"error"})}))}}(t)}})]})]})}),Object(D.jsxs)(u.a,{container:!0,children:[Object(D.jsx)(d.a,{className:0===B?t.tabSelected:t.tab,onClick:function(){return Q(0)},component:"span",children:"All"}),Object(D.jsx)(d.a,{className:1===B?t.tabSelected:t.tab,onClick:function(){return Q(1)},component:"span",children:"Labs"}),Object(D.jsx)(d.a,{className:2===B?t.tabSelected:t.tab,onClick:function(){return Q(2)},component:"span",children:"Imaging"}),Object(D.jsx)(d.a,{className:4===B?t.tabSelected:t.tab,onClick:function(){return Q(4)},component:"span",children:"Misc"}),Object(D.jsx)(d.a,{className:3===B?t.tabSelected:t.tab,onClick:function(){return Q(3)},component:"span",children:"Uncategorized"})]}),Object(D.jsx)(u.a,{item:!0,sm:4,xs:12,children:Boolean(z.length)&&Object(D.jsx)(m.a,{className:t.tableContainer,children:Object(D.jsxs)(f.a,{size:"small",className:t.table,children:[Object(D.jsx)(O.a,{children:Object(D.jsxs)(g.a,{children:[Object(D.jsx)(F,{children:"Created"}),Object(D.jsx)(F,{children:"Filename"})]})}),Object(D.jsx)(j.a,{children:z.map((function(t){return Object(D.jsxs)(I,{onClick:function(){return J(t.filename),void W(!0)},children:[Object(D.jsx)(F,{component:"th",scope:"item",children:v()(t.created).format("MMM D YYYY")}),Object(D.jsx)(F,{children:t.filename})]},"".concat(t.created,"_").concat(t.filename))}))})]})})}),R&&Object(D.jsx)(k.a,{open:R,cancelForm:function(){return W(!1)},title:"Lab Document",message:Object(D.jsx)(A,{documentName:G,patientId:null===o||void 0===o?void 0:o.client_id}),hideActions:!0,size:"sm",fullHeight:!0,transitionComponent:T})]})}},553:function(t,e,n){"use strict";var a=n(13),c=(n(0),n(413)),i=n(95),r=n(414),o=n(455),l=n(452),s=n(456),u=n(451),d=n(436),p=n(350),b=n(570),f=n.n(b),j=n(3),h=n(1),m=Object(d.a)((function(t){return Object(p.a)({titleContainer:{textAlign:"center",borderBottom:"1px solid #ddd",minHeight:53},content:{padding:"1rem 2rem",maxHeight:"86vh"},fullScreenContent:{maxHeight:"unset"},fullHeight:{minHeight:"86vh"},buttonClose:{position:"absolute",right:t.spacing(1),top:t.spacing(1),padding:t.spacing(1)},save:{background:t.palette.success,minWidth:100},cancel:{background:t.palette.error,minWidth:100}})})),O=function(t){var e,n=t.title,d=t.open,p=t.message,b=t.applyForm,O=t.cancelForm,g=t.hideActions,x=t.applyButtonText,v=t.cancelButtonText,y=t.size,k=t.fullScreen,_=t.fullHeight,S=t.transitionComponent,C=m();return Object(h.jsx)("div",{children:Object(h.jsxs)(o.a,{fullScreen:Boolean(k),open:d,onClose:O,fullWidth:!0,maxWidth:y,TransitionComponent:S,children:[O&&Object(h.jsx)(c.a,{className:C.buttonClose,onClick:O,"aria-label":"close",children:Object(h.jsx)(f.a,{fontSize:"small"})}),Object(h.jsx)(u.a,{disableTypography:!0,className:C.titleContainer,id:"form-dialog-title",children:Object(h.jsx)(i.a,{variant:"h5",children:n})}),Object(h.jsx)(s.a,{className:Object(j.a)((e={},Object(a.a)(e,C.content,!0),Object(a.a)(e,C.fullHeight,_),Object(a.a)(e,C.fullScreenContent,k),e)),children:p}),g?null:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(l.a,{align:"center",children:[b&&Object(h.jsx)(r.a,{className:C.save,onClick:b,color:"primary",type:"submit",variant:"contained",children:x}),O&&Object(h.jsx)(r.a,{className:C.cancel,onClick:O,color:"secondary",type:"submit",variant:"contained",children:v})]})})]})})};O.defaultProps={title:"",message:null,applyForm:function(){},cancelForm:function(){},hideActions:!0,applyButtonText:"Continue",cancelButtonText:"Cancel",size:"lg",fullScreen:!1,fullHeight:!1,transitionComponent:void 0},e.a=O},555:function(t,e,n){"use strict";var a=n(21),c=n.n(a),i=n(33),r=n(533),o=n(534),l=n(56),s=n.n(l),u=n(44),d=n(57),p=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"getProfile",value:function(){return s.a.get("".concat(u.a,"/client-portal/patient"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updateProfile",value:function(t,e){return s.a.put("".concat(u.a,"/client-portal/patient/").concat(e),t,{headers:Object(d.a)()})}},{key:"getPractitioners",value:function(t){var e="".concat(u.a,"/client-portal/practitioners");return t&&(e="".concat(u.a,"/client-portal/practitioners/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPractitionerDates",value:function(t){var e="".concat(u.a,"/client-portal/practitioner-dates");return t&&(e="".concat(u.a,"/client-portal/practitioner-dates/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBookedAppointments",value:function(t,e){var n="".concat(u.a,"/client-portal/booked-appointments");return t&&(n="".concat(u.a,"/client-portal/booked-appointments?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(n,{headers:Object(d.a)(),params:e}).then((function(t){return t.data}))}},{key:"getAppointmentTypesByPractitionerId",value:function(t){return s.a.post("".concat(u.a,"/client-portal/appointment-types"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"bookAppointment",value:function(t){return s.a.post("".concat(u.a,"/client-portal/appointment"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updateAppointment",value:function(t,e){return s.a.put("".concat(u.a,"/client-portal/appointment/").concat(e),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getEncounters",value:function(t){var e="".concat(u.a,"/client-portal/encounters");return t&&(e="".concat(u.a,"/client-portal/encounters/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getLabDocuments",value:function(t){var e="".concat(u.a,"/client-portal/labs");return t&&(e="".concat(u.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createLabDocuments",value:function(t,e){var n="".concat(u.a,"/client-portal/labs");return t&&(n="".concat(u.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.post(n,e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBillings",value:function(t){var e="".concat(u.a,"/client-portal/billings");return t&&(e="".concat(u.a,"/client-portal/billings/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createBilling",value:function(t){return s.a.post("".concat(u.a,"/client-portal/billings"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getBalance",value:function(t){var e="".concat(u.a,"/client-portal/balance");return t&&(e="".concat(u.a,"/client-portal/balance/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPaymentMethods",value:function(t){var e="".concat(u.a,"/patient-portal/payment-methods");return t&&(e="".concat(u.a,"/patient-portal/payment-methods/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPharmacies",value:function(){return s.a.get("".concat(u.a,"/client-portal/pharmacy"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"searchPharmacies",value:function(t){return s.a.post("".concat(u.a,"/client-portal/pharmacy/search"),t,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"updatePharmacy",value:function(t,e){return s.a.put("".concat(u.a,"/client-portal/pharmacy/").concat(t),e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getRequisitions",value:function(t){var e="".concat(u.a,"/client-portal/lab_requisitions");return t&&(e="".concat(u.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getLabBilling",value:function(t){var e="".concat(u.a,"/client-portal/lab_billing");return t&&(e="".concat(u.a,"/client-portal/lab_billing/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getTestList",value:function(t){var e="".concat(u.a,"/client-portal/lab_requisitions/test-list");return t&&(e="".concat(u.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),s.a.get(e,{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getTestProfileInfo",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(u.a,"/client-portal/lab_requisitions/test-profile-info?testId=").concat(e),t.next=3,s.a.get(n,{headers:Object(d.a)()});case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getProfileTests",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(u.a,"/client-portal/lab_requisitions/profile-tests?testId=").concat(e),t.next=3,s.a.get(n,{headers:Object(d.a)()});case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHandouts",value:function(){return s.a.get("".concat(u.a,"/client-portal/handouts"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"createHandouts",value:function(){return s.a.post("".concat(u.a,"/client-portal/handouts"),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"deleteHandout",value:function(t){return s.a.delete("".concat(u.a,"/client-portal/handouts/").concat(t),{headers:Object(d.a)()}).then((function(t){return t.data}))}},{key:"getPrescriptions",value:function(){return s.a.get("".concat(u.a,"/client-portal/prescription"),{headers:Object(d.a)()}).then((function(t){return t.data}))}}]),t}();e.a=new p},558:function(t,e,n){"use strict";var a=n(0);e.a=function(t,e){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){n.current?t():n.current=!0}),e)}},640:function(t,e){},641:function(t,e){},642:function(t,e){},643:function(t,e){},644:function(t,e){}}]);
//# sourceMappingURL=48.abf2508a.chunk.js.map