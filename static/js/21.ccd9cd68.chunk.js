(this.webpackJsonpAvonEMR=this.webpackJsonpAvonEMR||[]).push([[21],{1088:function(t,e,n){},1145:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return N}));var a=n(4),i=n(84),c=n(29),r=n(13),o=n(0),l=n(436),u=n(432),d=n(95),s=n(438),p=n(439),m=n(426),f=n(315),b=n(414),v=n(577),h=n(43),j=n.n(h),O=n(99),g=n(28),_=n(16),y=n(558),x=n(555),k=n(64),Y=n(1003),T=n(693),D=n(793),C=n(794),H=(n(1088),n(1));function M(t){return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("p",{style:{color:"#fff",backgroundColor:t.event.backgroundColor,borderColor:t.event.backgroundColor,width:"100%",padding:"3px 5px",borderRadius:"3px",cursor:"pointer"},children:[t.timeText," ",t.event.title]})})}var B=function(t){var e=t.events,n=t.onDayClick,a=t.onEventClick,i=t.selectedDate;return Object(H.jsx)(Y.a,{plugins:[T.b,C.a,D.a],headerToolbar:{left:"title",center:"",right:"prev next"},initialView:"dayGridMonth",weekends:!0,events:e,eventContent:M,dayCellClassNames:function(t){return function(t,e){var n=t.date;return j()(n).format("YYYY-MM-DD")===e?"selected-day":""}(t,i)},dateClick:function(t){return n(t.dateStr)},eventClick:function(t){return a(t)},selectable:!0})},S=Object(l.a)((function(t){return{root:{flexGrow:1,padding:"40px 0px"},title:{paddingBottom:t.spacing(.5)},subTitle:{paddingBottom:t.spacing(1),fontSize:"14px"},inputFix:{marginBottom:t.spacing(1),width:400},submitBtn:{minWidth:120,background:"#008B00",minHeight:50},calendarContainer:{marginTop:t.spacing(1),padding:t.spacing(1),borderRadius:5,boxShadow:"-1px 0px 19px -4px rgba(0,17,1,0.45)",margin:"0"},timingBox:Object(r.a)({marginBottom:t.spacing(2),minHeight:50},t.breakpoints.down("md"),{marginBottom:t.spacing(1),minHeight:40}),currentDate:{minHeight:t.spacing(8)},ml1:{marginLeft:t.spacing(1)},noWrap:Object(r.a)({},t.breakpoints.up("md"),{whiteSpace:"nowrap"}),centerContainer:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},errorIcon:{position:"relative",top:5},messageBox:{display:"flex",alignItems:"center",marginBottom:t.spacing(2),backgroundColor:"rgb(232, 243, 252)",padding:"6px 16px",fontSize:14,lineHeight:21,borderRadius:4,minHeight:50,"& p":{color:"rgb(12, 54, 91)"}}}})),P=j()().format("YYYY-MM-DD"),w=j()().add(1,"days").format("YYYY-MM-DD"),A=j()().add(365,"days").format("YYYY-MM-DD"),N=function(){var t,e=S(),n=Object(O.b)().enqueueSnackbar,l=Object(g.g)(),h=Object(_.a)().user,Y=Object(o.useState)(""),T=Object(c.a)(Y,2),D=T[0],C=T[1],M=Object(o.useState)([]),N=Object(c.a)(M,2),q=N[0],I=N[1],E=Object(o.useState)([]),R=Object(c.a)(E,2),L=R[0],W=R[1],F=Object(o.useState)([]),z=Object(c.a)(F,2),G=z[0],J=z[1],V=Object(o.useState)([]),$=Object(c.a)(V,2),K=$[0],Q=$[1],U=Object(o.useState)([]),X=Object(c.a)(U,2),Z=X[0],tt=X[1],et=Object(o.useState)([]),nt=Object(c.a)(et,2),at=nt[0],it=nt[1],ct=Object(o.useState)(null),rt=Object(c.a)(ct,2),ot=rt[0],lt=rt[1],ut=Object(o.useState)(!1),dt=Object(c.a)(ut,2),st=dt[0],pt=dt[1],mt=Object(o.useState)({practitioner:"",appointmentType:"",date:null,time:null}),ft=Object(c.a)(mt,2),bt=ft[0],vt=ft[1],ht=Object(o.useState)(!1),jt=Object(c.a)(ht,2),Ot=jt[0],gt=jt[1],_t=Object(g.h)(),yt=null===_t||void 0===_t||null===(t=_t.state)||void 0===t?void 0:t.appointment,xt=Object(o.useCallback)((function(t){x.a.getPractitionerDates().then((function(e){var n=e.data.filter((function(e){return e.user_id===t}));W(Object(i.a)(n))}))}),[]),kt=Object(o.useCallback)((function(t){var e={data:{practitioner_id:t}};x.a.getAppointmentTypesByPractitionerId(e).then((function(t){it(t.data)})),xt(t)}),[xt]),Yt=function(t,e){vt(Object(a.a)(Object(a.a)({},bt),{},Object(r.a)({},t,e)))},Tt=Object(o.useCallback)((function(){x.a.getPractitioners().then((function(t){var e=t.data;if(I(e),e.length&&!yt){vt(Object(a.a)(Object(a.a)({},bt),{},Object(r.a)({},"practitioner",1))),kt(1)}}))}),[]),Dt=Object(o.useCallback)((function(t){var e={practitioner_id:t};x.a.getBookedAppointments(null,e).then((function(t){var e=t.data;if(e.length){var n=e.map((function(t){return Object(a.a)({start_time:j()(t.start_dt).format("HH:mm"),end_time:j()(t.end_dt).format("HH:mm")},t)}));tt(n)}}))}),[]);Object(o.useEffect)((function(){var t,e=null===_t||void 0===_t||null===(t=_t.state)||void 0===t?void 0:t.appointment;if(null===e||void 0===e?void 0:e.patient_id){var n=j()(e.start_dt).format("YYYY-MM-DD"),i={time_start:j()(e.start_dt).format("HH:mm"),time_end:j()(e.end_dt).format("HH:mm")};vt((function(t){return Object(a.a)(Object(a.a)(Object(a.a)({},t),e),{},{appointmentType:e.appointment_type_id,date:n,time:i,practitioner:null===e||void 0===e?void 0:e.user_id})})),gt(!0),pt(!0),xt(null===e||void 0===e?void 0:e.user_id),kt(null===e||void 0===e?void 0:e.user_id),lt(null===e||void 0===e?void 0:e.appointment_type_length)}}),[null===_t||void 0===_t?void 0:_t.state,xt,kt]),Object(o.useEffect)((function(){Tt()}),[Tt]),Object(y.a)((function(){var t=bt.practitioner;t&&!yt&&Dt(t)}),[bt.practitioner]);var Ct=function(t){vt((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},"time",t))}))},Ht=function(t){vt((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},"date",t))}))},Mt=function(t,e){var n;if(null===t||void 0===t?void 0:t.event)n=j()(t.event._instance.range.start).format("YYYY-MM-DD");else{var a;n=t;var c=j()(t).diff(P,"days"),r=j()(t).diff((null===(a=L[0])||void 0===a?void 0:a.date_end)||A,"days"),o=c<0,l=0===c;if(l||o||r>0)return C(o?"Can not select a past date.":l?"There are no open times on ".concat(Object(k.l)(n),"."):"There are no open times on this day."),Q([]),Ht(n),void Ct(null)}Ht(n),C("");var u=j()(n,"YYYY-MM-DD HH:mm:ss").format("dddd");if(L[0][u.toLowerCase()]){var d=Z.filter((function(t){return j()(t.start_dt).format("YYYY-MM-DD")===n})).map((function(t){return{startTime:t.start_time,endTime:t.end_time}})),s=(e||G).map((function(t){return{startTime:j()(t.split("-")[0].trim(),["HH.mm"]).format("HH:mm"),endTime:j()(t.split("-")[1].trim(),["HH.mm"]).format("HH:mm")}})).filter((function(t){return!d.find((function(e){return e.startTime===t.startTime||t.endTime===e.endTime}))}));Q(Object(i.a)(s)),s.length||C("There are no open times on this day.")}else C("There are no open times on ".concat(Object(k.l)(n),".")),Q([]),Ct(null)},Bt=function(t,e,n){t=t.toString().split(":"),e=e.toString().split(":"),n=parseInt(n,10);var a=function(t){return t<10?"0"+t.toString():t},i=parseInt(t[0],10),c=parseInt(t[1],10),r=parseInt(e[0],10),o=i,l=c,u=a(o)+":"+a(l),d="",s=[];do{((l+=n)%60===0||l>60)&&(l=60===l?0:l-60,o+=1),d=o+":"+a(l),s.push(u+" - "+d),u=d}while(o!==r);return s};Object(y.a)((function(){if(L.length&&ot){var t=[];L.forEach((function(e){var n=Bt(e.time_start,e.time_end,ot);t=[].concat(Object(i.a)(t),Object(i.a)(n))})),J(Object(i.a)(t)),Mt(bt.date,t)}}),[L,ot]);var St=function(t){var e=t.startTime,n=t.endTime,a=j()(e,["HH.mm"]).format("h:mm A"),i=j()(n,["HH.mm"]).format("h:mm A");return"".concat(a," - ").concat(i)},Pt=Object(o.useCallback)((function(){var t=["Saturday","Sunday"];L.length&&["monday","tuesday","wednesday","thursday","friday"].forEach((function(e){L[0][e]||t.push(Object(k.b)(e))}));var e=L[0].date_end||A;return Object(k.t)(w,e,t).map((function(t){return{title:"Available",date:t,backgroundColor:"#008B00"}}))}),[L]),wt=Object(o.useCallback)((function(t){var e="outlined",n=null===bt||void 0===bt?void 0:bt.time,a=t.startTime,i=t.endTime;return(null===n||void 0===n?void 0:n.time_start)===a&&(null===n||void 0===n?void 0:n.time_end)===i&&(e="contained"),e}),[bt.time]);return Object(H.jsxs)("div",{className:e.root,children:[Object(H.jsxs)(u.a,{mb:2,children:[Object(H.jsx)(d.a,{component:"h1",variant:"h2",color:"textPrimary",className:e.title,children:"Appointments"}),Object(H.jsx)(d.a,{variant:"h5",color:"textPrimary",className:e.subTitle,children:"Please select a date and time"})]}),Object(H.jsxs)(s.a,{item:!0,lg:3,md:4,sm:6,xs:12,children:[Object(H.jsx)(p.a,{select:!0,required:!0,variant:"outlined",label:"Select Practitioner",margin:"dense",fullWidth:!0,value:bt.practitioner,className:e.inputFix,onChange:function(t){return Yt("practitioner",t.target.value)},children:q.map((function(t){return Object(H.jsx)(m.a,{value:t.user_id,children:t.name},t.user_id)}))}),Object(H.jsx)(p.a,{select:!0,required:!0,variant:"outlined",label:"Select Appointment Type",margin:"dense",fullWidth:!0,value:bt.appointmentType,className:e.inputFix,onChange:function(t){return function(t){var e;vt((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},"appointmentType",t))}));var n=null===(e=at.find((function(e){return e.id===t})))||void 0===e?void 0:e.length;if(lt(n=45===n?60:n),L.length){var c=[];L.forEach((function(t){var e=Bt(t.time_start,t.time_end,n);c=[].concat(Object(i.a)(c),Object(i.a)(e))})),J(Object(i.a)(c));var o=bt.date;Mt(o||w,c)}st||pt(!0)}(t.target.value)},disabled:!at.length,children:at.map((function(t){return Object(H.jsx)(m.a,{value:t.id,children:"".concat(t.appointment_type," - ").concat(t.length," minutes - $").concat(t.fee)},t.id)}))})]}),st&&(L.length?Object(H.jsx)(u.a,{mt:3,children:Object(H.jsx)(s.a,{item:!0,lg:9,md:9,sm:12,xs:12,children:Object(H.jsxs)(s.a,{container:!0,className:e.calendarContainer,spacing:3,children:[Object(H.jsx)(s.a,{item:!0,lg:9,md:9,sm:9,xs:9,children:Object(H.jsx)(B,{events:Pt(),onDayClick:function(t){return Mt(t)},onEventClick:function(t){return Mt(t)},selectedDate:bt.date})}),Object(H.jsxs)(s.a,{item:!0,lg:3,md:3,sm:3,xs:3,children:[Object(H.jsx)(s.a,{className:e.currentDate,children:Object(H.jsx)(d.a,{variant:"h4",component:"h1",color:"textPrimary",children:Object(H.jsx)("span",{className:e.noWrap,children:bt.date?j()(bt.date).format("dddd, MMM D YYYY"):""})})}),Boolean(D.length)&&Object(H.jsx)(v.a,{severity:"info",children:D}),Object(H.jsxs)(f.a,{in:Boolean((null===bt||void 0===bt?void 0:bt.date)&&K.length),timeout:500,children:[Object(H.jsx)(s.a,{className:e.messageBox,children:Object(H.jsx)(d.a,{children:"Please select one of the following times."})}),(null===bt||void 0===bt?void 0:bt.date)&&K.map((function(t,n){return Object(H.jsx)(b.a,{onClick:function(){var e={id:n,time_start:t.startTime,time_end:t.endTime};Yt("time",e)},className:e.timingBox,variant:wt(t),color:"primary",fullWidth:!0,children:St(t)},"".concat(t.startTime,"-").concat(t.endTime))})),Object(H.jsx)(b.a,{fullWidth:!0,type:"submit",color:"secondary",variant:"contained",className:e.submitBtn,onClick:function(){return function(){var t,e=q.filter((function(t){return t.user_id===bt.practitioner})),i=(null===bt||void 0===bt?void 0:bt.appointment_type_length)||0;if(i||(i=null===at||void 0===at||null===(t=at.find((function(t){return t.id===bt.appointmentType})))||void 0===t?void 0:t.length),bt.time&&bt.date){var c,r={data:Object(a.a)(Object(a.a)({user_id:null===e||void 0===e||null===(c=e[0])||void 0===c?void 0:c.user_id},!Ot&&{status:"R"}),{},{start_dt:"".concat(j()(bt.date).format("YYYY-MM-DD")," ").concat(bt.time.time_start),end_dt:"".concat(j()(bt.date).format("YYYY-MM-DD")," ").concat(bt.time.time_end),patient_id:null===h||void 0===h?void 0:h.id,reschedule:Ot,appointment_type_id:bt.appointmentType})};x.a[Ot?"updateAppointment":"bookAppointment"](r,null===bt||void 0===bt?void 0:bt.id).then((function(){setTimeout((function(){var t;pt(!1),it([]),vt(Object(a.a)(Object(a.a)({},bt),{},{practitioner:"",appointmentType:"",date:null,time:null})),l.push({pathname:"/patient/appointments/confirmation",state:{practitioner:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.name,appointmentLength:i,date:null===bt||void 0===bt?void 0:bt.date,time:null===bt||void 0===bt?void 0:bt.time,reschedule:Ot}})}),1e3),n("Appointment ".concat(Ot?"rescheduled":"requested"," successfully"),{variant:"success"})}))}else C("Date & Time selection is required")}()},children:Ot?"Reschedule Appointment":"Book Appointment"})]})]})]})})}):Object(H.jsx)(s.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:e.centerContainer,children:Object(H.jsx)(d.a,{variant:"h3",gutterBottom:!0,children:"No time slots available for this practitioner"})}))]})}},555:function(t,e,n){"use strict";var a=n(21),i=n.n(a),c=n(33),r=n(533),o=n(534),l=n(56),u=n.n(l),d=n(44),s=n(57),p=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"getProfile",value:function(){return u.a.get("".concat(d.a,"/client-portal/patient"),{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"updateProfile",value:function(t,e){return u.a.put("".concat(d.a,"/client-portal/patient/").concat(e),t,{headers:Object(s.a)()})}},{key:"getPractitioners",value:function(t){var e="".concat(d.a,"/client-portal/practitioners");return t&&(e="".concat(d.a,"/client-portal/practitioners/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getPractitionerDates",value:function(t){var e="".concat(d.a,"/client-portal/practitioner-dates");return t&&(e="".concat(d.a,"/client-portal/practitioner-dates/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getBookedAppointments",value:function(t,e){var n="".concat(d.a,"/client-portal/booked-appointments");return t&&(n="".concat(d.a,"/client-portal/booked-appointments?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(n,{headers:Object(s.a)(),params:e}).then((function(t){return t.data}))}},{key:"getAppointmentTypesByPractitionerId",value:function(t){return u.a.post("".concat(d.a,"/client-portal/appointment-types"),t,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"bookAppointment",value:function(t){return u.a.post("".concat(d.a,"/client-portal/appointment"),t,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"updateAppointment",value:function(t,e){return u.a.put("".concat(d.a,"/client-portal/appointment/").concat(e),t,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getEncounters",value:function(t){var e="".concat(d.a,"/client-portal/encounters");return t&&(e="".concat(d.a,"/client-portal/encounters/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getLabDocuments",value:function(t){var e="".concat(d.a,"/client-portal/labs");return t&&(e="".concat(d.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"createLabDocuments",value:function(t,e){var n="".concat(d.a,"/client-portal/labs");return t&&(n="".concat(d.a,"/client-portal/labs/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.post(n,e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getBillings",value:function(t){var e="".concat(d.a,"/client-portal/billings");return t&&(e="".concat(d.a,"/client-portal/billings/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"createBilling",value:function(t){return u.a.post("".concat(d.a,"/client-portal/billings"),t,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getBalance",value:function(t){var e="".concat(d.a,"/client-portal/balance");return t&&(e="".concat(d.a,"/client-portal/balance/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getPaymentMethods",value:function(t){var e="".concat(d.a,"/patient-portal/payment-methods");return t&&(e="".concat(d.a,"/patient-portal/payment-methods/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getPharmacies",value:function(){return u.a.get("".concat(d.a,"/client-portal/pharmacy"),{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"searchPharmacies",value:function(t){return u.a.post("".concat(d.a,"/client-portal/pharmacy/search"),t,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"updatePharmacy",value:function(t,e){return u.a.put("".concat(d.a,"/client-portal/pharmacy/").concat(t),e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getRequisitions",value:function(t){var e="".concat(d.a,"/client-portal/lab_requisitions");return t&&(e="".concat(d.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getLabBilling",value:function(t){var e="".concat(d.a,"/client-portal/lab_billing");return t&&(e="".concat(d.a,"/client-portal/lab_billing/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getTestList",value:function(t){var e="".concat(d.a,"/client-portal/lab_requisitions/test-list");return t&&(e="".concat(d.a,"/client-portal/lab_requisitions/?patient_id=").concat(t.id,"&client_id=").concat(t.client_id)),u.a.get(e,{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getTestProfileInfo",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(d.a,"/client-portal/lab_requisitions/test-profile-info?testId=").concat(e),t.next=3,u.a.get(n,{headers:Object(s.a)()});case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getProfileTests",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(d.a,"/client-portal/lab_requisitions/profile-tests?testId=").concat(e),t.next=3,u.a.get(n,{headers:Object(s.a)()});case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHandouts",value:function(){return u.a.get("".concat(d.a,"/client-portal/handouts"),{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"createHandouts",value:function(){return u.a.post("".concat(d.a,"/client-portal/handouts"),{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"deleteHandout",value:function(t){return u.a.delete("".concat(d.a,"/client-portal/handouts/").concat(t),{headers:Object(s.a)()}).then((function(t){return t.data}))}},{key:"getPrescriptions",value:function(){return u.a.get("".concat(d.a,"/client-portal/prescription"),{headers:Object(s.a)()}).then((function(t){return t.data}))}}]),t}();e.a=new p},558:function(t,e,n){"use strict";var a=n(0);e.a=function(t,e){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){n.current?t():n.current=!0}),e)}}}]);
//# sourceMappingURL=21.ccd9cd68.chunk.js.map